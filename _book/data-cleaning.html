<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 5 Data Cleaning | Medical Statistics using R</title>
<meta name="author" content="Samuel Blay Nguah">
<meta name="description" content="Data to be analysed has be ”cleaned” first of abnormal or invalid values. This should be done with the understanding of the data at hand, how it was collected in the first place and with very...">
<meta name="generator" content="bookdown 0.34 with bs4_book()">
<meta property="og:title" content="Chapter 5 Data Cleaning | Medical Statistics using R">
<meta property="og:type" content="book">
<meta property="og:url" content="https://medstastwithr.netlify.app/data-cleaning.html">
<meta property="og:description" content="Data to be analysed has be ”cleaned” first of abnormal or invalid values. This should be done with the understanding of the data at hand, how it was collected in the first place and with very...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 5 Data Cleaning | Medical Statistics using R">
<meta name="twitter:description" content="Data to be analysed has be ”cleaned” first of abnormal or invalid values. This should be done with the understanding of the data at hand, how it was collected in the first place and with very...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.2/transition.js"></script><script src="libs/bs3compat-0.4.2/tabs.js"></script><script src="libs/bs3compat-0.4.2/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="libs/tabwid-1.1.3/tabwid.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Medical Statistics using R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Preface</a></li>
<li><a class="" href="about.html"><span class="header-section-number">2</span> About</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">3</span> Introduction</a></li>
<li><a class="" href="the-basics.html"><span class="header-section-number">4</span> The Basics</a></li>
<li><a class="active" href="data-cleaning.html"><span class="header-section-number">5</span> Data Cleaning</a></li>
<li><a class="" href="descriptive-statistics-and-graphs.html"><span class="header-section-number">6</span> Descriptive Statistics and graphs</a></li>
<li><a class="" href="ordinal-logistic-regression.html"><span class="header-section-number">7</span> Ordinal logistic regression</a></li>
<li><a class="" href="cross.html"><span class="header-section-number">8</span> Cross-references</a></li>
<li><a class="" href="parts.html"><span class="header-section-number">9</span> Parts</a></li>
<li><a class="" href="footnotes-and-citations.html"><span class="header-section-number">10</span> Footnotes and citations</a></li>
<li><a class="" href="blocks.html"><span class="header-section-number">11</span> Blocks</a></li>
<li><a class="" href="sharing-your-book.html"><span class="header-section-number">12</span> Sharing your book</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/rstudio/bookdown-demo">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="data-cleaning" class="section level1" number="5">
<h1>
<span class="header-section-number">5</span> Data Cleaning<a class="anchor" aria-label="anchor" href="#data-cleaning"><i class="fas fa-link"></i></a>
</h1>
<p>Data to be analysed has be ”cleaned” first of abnormal or invalid values. This
should be done with the understanding of the data at hand, how it was collected
in the first place and with very little prejudice or bias. This is a critical
stage of the analysis where any arbitrary deletion or insertion of data could
significantly alter the conclusions.</p>
<p>It therefore goes without saying that all modifications done at the data
cleaning stage must have sound statistical, clinical as well as commonsensical
reasons to it. Also, the whole process of data cleaning should be well
documented and appropriately stored for future references. In this regard it is
not good practice to edit the data in softwares such as Microsoft Excel though
it may appear easy and tempting. This is because such softwares do not keep an
audit trail.</p>
<div id="data-dictionary-or-codebook" class="section level2" number="5.1">
<h2>
<span class="header-section-number">5.1</span> Data dictionary or codebook<a class="anchor" aria-label="anchor" href="#data-dictionary-or-codebook"><i class="fas fa-link"></i></a>
</h2>
<p>For a well collected and managed data there should always be a dictionary. The
dictionary outlines for every variable in the dataset its variable name, the
meaning of the variable,the source of the variable (from the questionnaire, data
collection sheet, etc.), the valid ranges or codes and the format. This is is an
invaluable tool in determine wrong and abnormal entries. It is also sometimes
referred to as the codebook.</p>
<p>A typical example is the one below. This is the data dictionary for the
<strong>blood_donors_3.dta</strong> file we are going to use.</p>
<div class="figure">
<img src="codebook.jpg" style="width:75.0%" alt=""><p class="caption">Codebook for the “blood_donors_3” data</p>
</div>
</div>
<div id="importing-the-data-into-r" class="section level2" number="5.2">
<h2>
<span class="header-section-number">5.2</span> Importing the data into <strong>R</strong><a class="anchor" aria-label="anchor" href="#importing-the-data-into-r"><i class="fas fa-link"></i></a>
</h2>
<p>The first step in analysis is to read or import the data into the data analysis
software where a general overview can be obtained. We begin by importing the
<code>blood_donors_3.dta</code> into <strong>R</strong> and calling it <code>blood3</code>.</p>
<pre><code>── Attaching core tidyverse packages ──── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors

Attaching package: 'magrittr'


The following object is masked from 'package:purrr':

    set_names


The following object is masked from 'package:tidyr':

    extract</code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">blood3</span> <span class="op">&lt;-</span> <span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_xls</a></span><span class="op">(</span><span class="st">"blood_donors_2.xls"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="visualising-the-data-in-r" class="section level2" number="5.3">
<h2>
<span class="header-section-number">5.3</span> Visualising the data in <strong>R</strong><a class="anchor" aria-label="anchor" href="#visualising-the-data-in-r"><i class="fas fa-link"></i></a>
</h2>
<p>Next we visualize the data</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-cleaning.html#cb10-1" aria-hidden="true" tabindex="-1"></a>blood3</span>
<span id="cb10-2"><a href="data-cleaning.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 25 × 6</span></span>
<span id="cb10-3"><a href="data-cleaning.html#cb10-3" aria-hidden="true" tabindex="-1"></a>      id    hb   hct   sex bldgrp pdonor</span>
<span id="cb10-4"><a href="data-cleaning.html#cb10-4" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb10-5"><a href="data-cleaning.html#cb10-5" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>     <span class="dv">1</span> <span class="fl">10.5</span>   <span class="fl">31.8</span>     <span class="dv">1</span>      <span class="dv">3</span>      <span class="dv">3</span></span>
<span id="cb10-6"><a href="data-cleaning.html#cb10-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>     <span class="dv">2</span> <span class="fl">11.9</span>   <span class="fl">37.2</span>     <span class="dv">1</span>      <span class="dv">4</span>      <span class="dv">0</span></span>
<span id="cb10-7"><a href="data-cleaning.html#cb10-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>     <span class="dv">3</span>  <span class="dv">1</span>     <span class="dv">26</span>       <span class="dv">1</span>      <span class="dv">1</span>      <span class="dv">1</span></span>
<span id="cb10-8"><a href="data-cleaning.html#cb10-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>     <span class="dv">4</span>  <span class="fl">8.90</span>  <span class="fl">26.8</span>     <span class="dv">1</span>      <span class="dv">1</span>      <span class="dv">3</span></span>
<span id="cb10-9"><a href="data-cleaning.html#cb10-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>     <span class="dv">5</span>  <span class="fl">7.80</span>  <span class="fl">24.2</span>     <span class="dv">1</span>      <span class="dv">1</span>      <span class="dv">2</span></span>
<span id="cb10-10"><a href="data-cleaning.html#cb10-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>     <span class="dv">6</span> <span class="dv">10</span>     <span class="fl">30.9</span>     <span class="dv">1</span>      <span class="dv">2</span>      <span class="dv">1</span></span>
<span id="cb10-11"><a href="data-cleaning.html#cb10-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>     <span class="dv">7</span> <span class="fl">10.4</span>   <span class="fl">33.9</span>     <span class="dv">1</span>      <span class="dv">2</span>      <span class="dv">0</span></span>
<span id="cb10-12"><a href="data-cleaning.html#cb10-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>     <span class="dv">8</span> <span class="fl">11.3</span>   <span class="dv">35</span>       <span class="dv">1</span>      <span class="dv">3</span>      <span class="dv">1</span></span>
<span id="cb10-13"><a href="data-cleaning.html#cb10-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>     <span class="dv">9</span> <span class="fl">16.4</span>   <span class="cn">NA</span>       <span class="dv">1</span>      <span class="dv">4</span>      <span class="dv">1</span></span>
<span id="cb10-14"><a href="data-cleaning.html#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>    <span class="dv">10</span> <span class="fl">14.4</span>   <span class="fl">43.6</span>     <span class="dv">1</span>      <span class="dv">4</span>      <span class="dv">1</span></span>
<span id="cb10-15"><a href="data-cleaning.html#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co"># ℹ 15 more rows</span></span></code></pre></div>
<p>To visualise all the data we can use the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> or <code><a href="https://rdrr.io/r/utils/View.html">View()</a></code> functions. Note
that this might not be the best if yiou have a relatively big data. Below I
use the <code><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame()</a></code> function to display the whole data.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data-cleaning.html#cb11-1" aria-hidden="true" tabindex="-1"></a>blood3 <span class="sc">%&gt;%</span> <span class="fu">as.data.frame</span>()</span>
<span id="cb11-2"><a href="data-cleaning.html#cb11-2" aria-hidden="true" tabindex="-1"></a>   id   hb  hct sex bldgrp pdonor</span>
<span id="cb11-3"><a href="data-cleaning.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>   <span class="dv">1</span> <span class="fl">10.5</span> <span class="fl">31.8</span>   <span class="dv">1</span>      <span class="dv">3</span>      <span class="dv">3</span></span>
<span id="cb11-4"><a href="data-cleaning.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>   <span class="dv">2</span> <span class="fl">11.9</span> <span class="fl">37.2</span>   <span class="dv">1</span>      <span class="dv">4</span>      <span class="dv">0</span></span>
<span id="cb11-5"><a href="data-cleaning.html#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>   <span class="dv">3</span>  <span class="fl">1.0</span> <span class="fl">26.0</span>   <span class="dv">1</span>      <span class="dv">1</span>      <span class="dv">1</span></span>
<span id="cb11-6"><a href="data-cleaning.html#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>   <span class="dv">4</span>  <span class="fl">8.9</span> <span class="fl">26.8</span>   <span class="dv">1</span>      <span class="dv">1</span>      <span class="dv">3</span></span>
<span id="cb11-7"><a href="data-cleaning.html#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>   <span class="dv">5</span>  <span class="fl">7.8</span> <span class="fl">24.2</span>   <span class="dv">1</span>      <span class="dv">1</span>      <span class="dv">2</span></span>
<span id="cb11-8"><a href="data-cleaning.html#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>   <span class="dv">6</span> <span class="fl">10.0</span> <span class="fl">30.9</span>   <span class="dv">1</span>      <span class="dv">2</span>      <span class="dv">1</span></span>
<span id="cb11-9"><a href="data-cleaning.html#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>   <span class="dv">7</span> <span class="fl">10.4</span> <span class="fl">33.9</span>   <span class="dv">1</span>      <span class="dv">2</span>      <span class="dv">0</span></span>
<span id="cb11-10"><a href="data-cleaning.html#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>   <span class="dv">8</span> <span class="fl">11.3</span> <span class="fl">35.0</span>   <span class="dv">1</span>      <span class="dv">3</span>      <span class="dv">1</span></span>
<span id="cb11-11"><a href="data-cleaning.html#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>   <span class="dv">9</span> <span class="fl">16.4</span>   <span class="cn">NA</span>   <span class="dv">1</span>      <span class="dv">4</span>      <span class="dv">1</span></span>
<span id="cb11-12"><a href="data-cleaning.html#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="dv">10</span> <span class="fl">14.4</span> <span class="fl">43.6</span>   <span class="dv">1</span>      <span class="dv">4</span>      <span class="dv">1</span></span>
<span id="cb11-13"><a href="data-cleaning.html#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> <span class="dv">11</span> <span class="fl">11.2</span> <span class="fl">33.2</span>   <span class="dv">0</span>      <span class="dv">3</span>     <span class="dv">99</span></span>
<span id="cb11-14"><a href="data-cleaning.html#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span> <span class="dv">12</span> <span class="fl">11.5</span> <span class="fl">35.5</span>   <span class="dv">0</span>      <span class="dv">3</span>      <span class="dv">1</span></span>
<span id="cb11-15"><a href="data-cleaning.html#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span> <span class="dv">13</span> <span class="fl">10.5</span> <span class="fl">33.7</span>   <span class="dv">0</span>      <span class="dv">3</span>      <span class="dv">2</span></span>
<span id="cb11-16"><a href="data-cleaning.html#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="dv">14</span> <span class="fl">12.2</span> <span class="fl">36.8</span>   <span class="dv">0</span>      <span class="dv">4</span>      <span class="dv">1</span></span>
<span id="cb11-17"><a href="data-cleaning.html#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span> <span class="dv">14</span> <span class="fl">16.4</span> <span class="fl">48.8</span>   <span class="dv">0</span>      <span class="dv">5</span>      <span class="dv">2</span></span>
<span id="cb11-18"><a href="data-cleaning.html#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="dv">16</span> <span class="dv">16</span> <span class="fl">12.7</span> <span class="fl">99.0</span>   <span class="dv">0</span>      <span class="dv">4</span>      <span class="dv">0</span></span>
<span id="cb11-19"><a href="data-cleaning.html#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="dv">17</span> <span class="dv">17</span>  <span class="fl">9.8</span> <span class="fl">30.5</span>   <span class="dv">0</span>      <span class="dv">1</span>      <span class="dv">4</span></span>
<span id="cb11-20"><a href="data-cleaning.html#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="dv">18</span> <span class="dv">18</span> <span class="fl">10.9</span> <span class="fl">33.8</span>   <span class="dv">0</span>      <span class="dv">3</span>      <span class="dv">0</span></span>
<span id="cb11-21"><a href="data-cleaning.html#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="dv">19</span> <span class="dv">19</span> <span class="fl">11.6</span> <span class="fl">35.4</span>   <span class="dv">0</span>      <span class="dv">3</span>      <span class="dv">3</span></span>
<span id="cb11-22"><a href="data-cleaning.html#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="dv">20</span> <span class="dv">20</span> <span class="fl">10.6</span> <span class="fl">34.9</span>   <span class="dv">0</span>      <span class="dv">9</span>      <span class="dv">2</span></span>
<span id="cb11-23"><a href="data-cleaning.html#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="dv">21</span> <span class="dv">21</span>  <span class="fl">9.1</span> <span class="fl">28.0</span>   <span class="dv">9</span>      <span class="dv">1</span>      <span class="dv">3</span></span>
<span id="cb11-24"><a href="data-cleaning.html#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="dv">22</span> <span class="dv">22</span> <span class="fl">11.9</span> <span class="fl">36.1</span>   <span class="dv">9</span>      <span class="dv">4</span>      <span class="dv">3</span></span>
<span id="cb11-25"><a href="data-cleaning.html#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="dv">23</span> <span class="dv">23</span> <span class="fl">10.5</span> <span class="fl">34.2</span>   <span class="dv">9</span>      <span class="dv">3</span>      <span class="dv">2</span></span>
<span id="cb11-26"><a href="data-cleaning.html#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="dv">24</span> <span class="dv">24</span> <span class="fl">12.3</span> <span class="fl">38.2</span>   <span class="dv">9</span>      <span class="dv">4</span>      <span class="dv">2</span></span>
<span id="cb11-27"><a href="data-cleaning.html#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="dv">25</span> <span class="dv">25</span> <span class="fl">11.0</span> <span class="fl">35.7</span>   <span class="dv">9</span>      <span class="dv">3</span>      <span class="dv">2</span></span></code></pre></div>
</div>
<div id="describing-or-summarizing-the-data" class="section level2" number="5.4">
<h2>
<span class="header-section-number">5.4</span> Describing or summarizing the data<a class="anchor" aria-label="anchor" href="#describing-or-summarizing-the-data"><i class="fas fa-link"></i></a>
</h2>
<p>We first use the <code>glimpse()</code> function to have a basic view of variable names and variable types</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data-cleaning.html#cb12-1" aria-hidden="true" tabindex="-1"></a>blood3 <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span>
<span id="cb12-2"><a href="data-cleaning.html#cb12-2" aria-hidden="true" tabindex="-1"></a>Rows<span class="sc">:</span> <span class="dv">25</span></span>
<span id="cb12-3"><a href="data-cleaning.html#cb12-3" aria-hidden="true" tabindex="-1"></a>Columns<span class="sc">:</span> <span class="dv">6</span></span>
<span id="cb12-4"><a href="data-cleaning.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> id     <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, …</span>
<span id="cb12-5"><a href="data-cleaning.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> hb     <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="fl">10.5</span>, <span class="fl">11.9</span>, <span class="fl">1.0</span>, <span class="fl">8.9</span>, <span class="fl">7.8</span>, <span class="fl">10.0</span>, <span class="fl">10.4</span>, <span class="fl">11.3</span>…</span>
<span id="cb12-6"><a href="data-cleaning.html#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> hct    <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="fl">31.8</span>, <span class="fl">37.2</span>, <span class="fl">26.0</span>, <span class="fl">26.8</span>, <span class="fl">24.2</span>, <span class="fl">30.9</span>, <span class="fl">33.9</span>, 3…</span>
<span id="cb12-7"><a href="data-cleaning.html#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> sex    <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, 0…</span>
<span id="cb12-8"><a href="data-cleaning.html#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> bldgrp <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>, 5…</span>
<span id="cb12-9"><a href="data-cleaning.html#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> pdonor <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">99</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, …</span></code></pre></div>
<p>We can also use the <code>dfSummary()</code> function from the <code>summarytools</code> package to
give a more comprehensive output for each variable.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-cleaning.html#cb13-1" aria-hidden="true" tabindex="-1"></a>blood3 <span class="sc">%&gt;%</span> summarytools<span class="sc">::</span><span class="fu">dfSummary</span>()</span>
<span id="cb13-2"><a href="data-cleaning.html#cb13-2" aria-hidden="true" tabindex="-1"></a>Data Frame Summary  </span>
<span id="cb13-3"><a href="data-cleaning.html#cb13-3" aria-hidden="true" tabindex="-1"></a>blood3  </span>
<span id="cb13-4"><a href="data-cleaning.html#cb13-4" aria-hidden="true" tabindex="-1"></a>Dimensions<span class="sc">:</span> <span class="dv">25</span> x <span class="dv">6</span>  </span>
<span id="cb13-5"><a href="data-cleaning.html#cb13-5" aria-hidden="true" tabindex="-1"></a>Duplicates<span class="sc">:</span> <span class="dv">0</span>  </span>
<span id="cb13-6"><a href="data-cleaning.html#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="data-cleaning.html#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="sc">--------------------------------------------------------------------------------------------------------</span></span>
<span id="cb13-8"><a href="data-cleaning.html#cb13-8" aria-hidden="true" tabindex="-1"></a>No   Variable    Stats <span class="sc">/</span> Values            <span class="fu">Freqs</span> (% of Valid)   Graph               Valid      Missing  </span>
<span id="cb13-9"><a href="data-cleaning.html#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="sc">----</span> <span class="sc">-----------</span> <span class="sc">-------------------------</span> <span class="sc">--------------------</span> <span class="sc">-------------------</span> <span class="sc">----------</span> <span class="sc">---------</span></span>
<span id="cb13-10"><a href="data-cleaning.html#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>    id          <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="dv">13</span> (<span class="fl">7.4</span>)      <span class="dv">24</span> distinct values   <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>           <span class="dv">25</span>         <span class="dv">0</span>        </span>
<span id="cb13-11"><a href="data-cleaning.html#cb13-11" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>                               <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>           (<span class="fl">100.0</span><span class="sc">%)   (0.0%</span>)   </span>
<span id="cb13-12"><a href="data-cleaning.html#cb13-12" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">1</span> <span class="sc">&lt;</span> <span class="dv">13</span> <span class="sc">&lt;</span> <span class="dv">25</span>                                    <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>                               </span>
<span id="cb13-13"><a href="data-cleaning.html#cb13-13" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="dv">12</span> (<span class="fl">0.6</span>)                            <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>                               </span>
<span id="cb13-14"><a href="data-cleaning.html#cb13-14" aria-hidden="true" tabindex="-1"></a>                                                                <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>                               </span>
<span id="cb13-15"><a href="data-cleaning.html#cb13-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-16"><a href="data-cleaning.html#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    hb          <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="dv">11</span> (<span class="fl">2.9</span>)      <span class="dv">21</span> distinct values             <span class="sc">:</span>         <span class="dv">25</span>         <span class="dv">0</span>        </span>
<span id="cb13-17"><a href="data-cleaning.html#cb13-17" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>                                         <span class="er">:</span>         (<span class="fl">100.0</span><span class="sc">%)   (0.0%</span>)   </span>
<span id="cb13-18"><a href="data-cleaning.html#cb13-18" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">1</span> <span class="sc">&lt;</span> <span class="dv">11</span> <span class="sc">&lt;</span> <span class="fl">16.4</span>                                            <span class="sc">:</span>                             </span>
<span id="cb13-19"><a href="data-cleaning.html#cb13-19" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="fl">1.5</span> (<span class="fl">0.3</span>)                                   . <span class="sc">:</span>                             </span>
<span id="cb13-20"><a href="data-cleaning.html#cb13-20" aria-hidden="true" tabindex="-1"></a>                                                                .     . <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> . <span class="sc">:</span>                       </span>
<span id="cb13-21"><a href="data-cleaning.html#cb13-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-22"><a href="data-cleaning.html#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>    hct         <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="fl">36.8</span> (<span class="fl">14.3</span>)   <span class="dv">24</span> distinct values     <span class="sc">:</span>                 <span class="dv">24</span>         <span class="dv">1</span>        </span>
<span id="cb13-23"><a href="data-cleaning.html#cb13-23" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>                                 <span class="er">:</span>                 (<span class="fl">96.0</span><span class="sc">%)    (4.0%</span>)   </span>
<span id="cb13-24"><a href="data-cleaning.html#cb13-24" aria-hidden="true" tabindex="-1"></a>                 <span class="fl">24.2</span> <span class="sc">&lt;</span> <span class="fl">34.6</span> <span class="sc">&lt;</span> <span class="dv">99</span>                                 <span class="sc">:</span>                                     </span>
<span id="cb13-25"><a href="data-cleaning.html#cb13-25" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="fl">4.7</span> (<span class="fl">0.4</span>)                             <span class="sc">:</span>                                     </span>
<span id="cb13-26"><a href="data-cleaning.html#cb13-26" aria-hidden="true" tabindex="-1"></a>                                                                <span class="er">:</span> <span class="er">:</span> .         .                         </span>
<span id="cb13-27"><a href="data-cleaning.html#cb13-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-28"><a href="data-cleaning.html#cb13-28" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>    sex         <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="fl">2.2</span> (<span class="fl">3.5</span>)     <span class="dv">0</span> <span class="sc">:</span> <span class="dv">10</span> (<span class="fl">40.0</span>%)       IIIIIIII            <span class="dv">25</span>         <span class="dv">0</span>        </span>
<span id="cb13-29"><a href="data-cleaning.html#cb13-29" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>          <span class="dv">1</span> <span class="sc">:</span> <span class="dv">10</span> (<span class="fl">40.0</span><span class="sc">%)       IIIIIIII            (100.0%</span>)   (<span class="fl">0.0</span>%)   </span>
<span id="cb13-30"><a href="data-cleaning.html#cb13-30" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span> <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&lt;</span> <span class="dv">9</span>                 <span class="dv">9</span> <span class="sc">:</span>  <span class="dv">5</span> (<span class="fl">20.0</span>%)       IIII                                    </span>
<span id="cb13-31"><a href="data-cleaning.html#cb13-31" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="dv">1</span> (<span class="fl">1.6</span>)                                                                     </span>
<span id="cb13-32"><a href="data-cleaning.html#cb13-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-33"><a href="data-cleaning.html#cb13-33" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>    bldgrp      <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="fl">3.1</span> (<span class="fl">1.7</span>)     <span class="dv">1</span> <span class="sc">:</span> <span class="dv">5</span> (<span class="fl">20.0</span>%)        IIII                <span class="dv">25</span>         <span class="dv">0</span>        </span>
<span id="cb13-34"><a href="data-cleaning.html#cb13-34" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>          <span class="dv">2</span> <span class="sc">:</span> <span class="dv">2</span> ( <span class="fl">8.0</span><span class="sc">%)        I                   (100.0%</span>)   (<span class="fl">0.0</span>%)   </span>
<span id="cb13-35"><a href="data-cleaning.html#cb13-35" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">1</span> <span class="sc">&lt;</span> <span class="dv">3</span> <span class="sc">&lt;</span> <span class="dv">9</span>                 <span class="dv">3</span> <span class="sc">:</span> <span class="dv">9</span> (<span class="fl">36.0</span>%)        IIIIIII                                 </span>
<span id="cb13-36"><a href="data-cleaning.html#cb13-36" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="dv">2</span> (<span class="fl">0.5</span>)        <span class="dv">4</span> <span class="sc">:</span> <span class="dv">7</span> (<span class="fl">28.0</span>%)        IIIII                                   </span>
<span id="cb13-37"><a href="data-cleaning.html#cb13-37" aria-hidden="true" tabindex="-1"></a>                                           <span class="dv">5</span> <span class="sc">:</span> <span class="dv">1</span> ( <span class="fl">4.0</span>%)                                                </span>
<span id="cb13-38"><a href="data-cleaning.html#cb13-38" aria-hidden="true" tabindex="-1"></a>                                           <span class="dv">9</span> <span class="sc">:</span> <span class="dv">1</span> ( <span class="fl">4.0</span>%)                                                </span>
<span id="cb13-39"><a href="data-cleaning.html#cb13-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-40"><a href="data-cleaning.html#cb13-40" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>    pdonor      <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="fl">5.6</span> (<span class="fl">19.5</span>)    <span class="dv">0</span> <span class="sc">:</span> <span class="dv">4</span> (<span class="fl">16.0</span>%)        III                 <span class="dv">25</span>         <span class="dv">0</span>        </span>
<span id="cb13-41"><a href="data-cleaning.html#cb13-41" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>          <span class="dv">1</span> <span class="sc">:</span> <span class="dv">7</span> (<span class="fl">28.0</span><span class="sc">%)        IIIII               (100.0%</span>)   (<span class="fl">0.0</span>%)   </span>
<span id="cb13-42"><a href="data-cleaning.html#cb13-42" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span> <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">&lt;</span> <span class="dv">99</span>                <span class="dv">2</span> <span class="sc">:</span> <span class="dv">7</span> (<span class="fl">28.0</span>%)        IIIII                                   </span>
<span id="cb13-43"><a href="data-cleaning.html#cb13-43" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="dv">2</span> (<span class="fl">3.5</span>)        <span class="dv">3</span> <span class="sc">:</span> <span class="dv">5</span> (<span class="fl">20.0</span>%)        IIII                                    </span>
<span id="cb13-44"><a href="data-cleaning.html#cb13-44" aria-hidden="true" tabindex="-1"></a>                                           <span class="dv">4</span> <span class="sc">:</span> <span class="dv">1</span> ( <span class="fl">4.0</span>%)                                                </span>
<span id="cb13-45"><a href="data-cleaning.html#cb13-45" aria-hidden="true" tabindex="-1"></a>                                           <span class="dv">99</span> <span class="sc">:</span> <span class="dv">1</span> ( <span class="fl">4.0</span>%)                                               </span>
<span id="cb13-46"><a href="data-cleaning.html#cb13-46" aria-hidden="true" tabindex="-1"></a><span class="sc">--------------------------------------------------------------------------------------------------------</span></span></code></pre></div>
</div>
<div id="cleaning-individual-variables" class="section level2" number="5.5">
<h2>
<span class="header-section-number">5.5</span> Cleaning individual variables<a class="anchor" aria-label="anchor" href="#cleaning-individual-variables"><i class="fas fa-link"></i></a>
</h2>
<p>We note that all the variables are of type “double”. <code>sex</code> and <code>bldgrp</code>
however should be factors. This is done and subsequently summarized below.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-cleaning.html#cb14-1" aria-hidden="true" tabindex="-1"></a>blood3 <span class="ot">&lt;-</span>  </span>
<span id="cb14-2"><a href="data-cleaning.html#cb14-2" aria-hidden="true" tabindex="-1"></a>    blood3 <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="data-cleaning.html#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">sex =</span> <span class="fu">factor</span>(sex, </span>
<span id="cb14-4"><a href="data-cleaning.html#cb14-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">9</span>),</span>
<span id="cb14-5"><a href="data-cleaning.html#cb14-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Female"</span>, <span class="st">"Male"</span>, <span class="st">"Missing"</span>)),</span>
<span id="cb14-6"><a href="data-cleaning.html#cb14-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">bldgrp=</span> <span class="fu">factor</span>(bldgrp, </span>
<span id="cb14-7"><a href="data-cleaning.html#cb14-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">9</span>),</span>
<span id="cb14-8"><a href="data-cleaning.html#cb14-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"O"</span>, <span class="st">"AB"</span>, <span class="st">"Missing"</span>))) </span>
<span id="cb14-9"><a href="data-cleaning.html#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="data-cleaning.html#cb14-10" aria-hidden="true" tabindex="-1"></a>blood3 <span class="sc">%&gt;%</span> summarytools<span class="sc">::</span><span class="fu">dfSummary</span>()</span>
<span id="cb14-11"><a href="data-cleaning.html#cb14-11" aria-hidden="true" tabindex="-1"></a>Data Frame Summary  </span>
<span id="cb14-12"><a href="data-cleaning.html#cb14-12" aria-hidden="true" tabindex="-1"></a>blood3  </span>
<span id="cb14-13"><a href="data-cleaning.html#cb14-13" aria-hidden="true" tabindex="-1"></a>Dimensions<span class="sc">:</span> <span class="dv">25</span> x <span class="dv">6</span>  </span>
<span id="cb14-14"><a href="data-cleaning.html#cb14-14" aria-hidden="true" tabindex="-1"></a>Duplicates<span class="sc">:</span> <span class="dv">0</span>  </span>
<span id="cb14-15"><a href="data-cleaning.html#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="data-cleaning.html#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="sc">--------------------------------------------------------------------------------------------------------</span></span>
<span id="cb14-17"><a href="data-cleaning.html#cb14-17" aria-hidden="true" tabindex="-1"></a>No   Variable    Stats <span class="sc">/</span> Values            <span class="fu">Freqs</span> (% of Valid)   Graph               Valid      Missing  </span>
<span id="cb14-18"><a href="data-cleaning.html#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="sc">----</span> <span class="sc">-----------</span> <span class="sc">-------------------------</span> <span class="sc">--------------------</span> <span class="sc">-------------------</span> <span class="sc">----------</span> <span class="sc">---------</span></span>
<span id="cb14-19"><a href="data-cleaning.html#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>    id          <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="dv">13</span> (<span class="fl">7.4</span>)      <span class="dv">24</span> distinct values   <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>           <span class="dv">25</span>         <span class="dv">0</span>        </span>
<span id="cb14-20"><a href="data-cleaning.html#cb14-20" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>                               <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>           (<span class="fl">100.0</span><span class="sc">%)   (0.0%</span>)   </span>
<span id="cb14-21"><a href="data-cleaning.html#cb14-21" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">1</span> <span class="sc">&lt;</span> <span class="dv">13</span> <span class="sc">&lt;</span> <span class="dv">25</span>                                    <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>                               </span>
<span id="cb14-22"><a href="data-cleaning.html#cb14-22" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="dv">12</span> (<span class="fl">0.6</span>)                            <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>                               </span>
<span id="cb14-23"><a href="data-cleaning.html#cb14-23" aria-hidden="true" tabindex="-1"></a>                                                                <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>                               </span>
<span id="cb14-24"><a href="data-cleaning.html#cb14-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-25"><a href="data-cleaning.html#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    hb          <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="dv">11</span> (<span class="fl">2.9</span>)      <span class="dv">21</span> distinct values             <span class="sc">:</span>         <span class="dv">25</span>         <span class="dv">0</span>        </span>
<span id="cb14-26"><a href="data-cleaning.html#cb14-26" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>                                         <span class="er">:</span>         (<span class="fl">100.0</span><span class="sc">%)   (0.0%</span>)   </span>
<span id="cb14-27"><a href="data-cleaning.html#cb14-27" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">1</span> <span class="sc">&lt;</span> <span class="dv">11</span> <span class="sc">&lt;</span> <span class="fl">16.4</span>                                            <span class="sc">:</span>                             </span>
<span id="cb14-28"><a href="data-cleaning.html#cb14-28" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="fl">1.5</span> (<span class="fl">0.3</span>)                                   . <span class="sc">:</span>                             </span>
<span id="cb14-29"><a href="data-cleaning.html#cb14-29" aria-hidden="true" tabindex="-1"></a>                                                                .     . <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> . <span class="sc">:</span>                       </span>
<span id="cb14-30"><a href="data-cleaning.html#cb14-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-31"><a href="data-cleaning.html#cb14-31" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>    hct         <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="fl">36.8</span> (<span class="fl">14.3</span>)   <span class="dv">24</span> distinct values     <span class="sc">:</span>                 <span class="dv">24</span>         <span class="dv">1</span>        </span>
<span id="cb14-32"><a href="data-cleaning.html#cb14-32" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>                                 <span class="er">:</span>                 (<span class="fl">96.0</span><span class="sc">%)    (4.0%</span>)   </span>
<span id="cb14-33"><a href="data-cleaning.html#cb14-33" aria-hidden="true" tabindex="-1"></a>                 <span class="fl">24.2</span> <span class="sc">&lt;</span> <span class="fl">34.6</span> <span class="sc">&lt;</span> <span class="dv">99</span>                                 <span class="sc">:</span>                                     </span>
<span id="cb14-34"><a href="data-cleaning.html#cb14-34" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="fl">4.7</span> (<span class="fl">0.4</span>)                             <span class="sc">:</span>                                     </span>
<span id="cb14-35"><a href="data-cleaning.html#cb14-35" aria-hidden="true" tabindex="-1"></a>                                                                <span class="er">:</span> <span class="er">:</span> .         .                         </span>
<span id="cb14-36"><a href="data-cleaning.html#cb14-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-37"><a href="data-cleaning.html#cb14-37" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>    sex         <span class="fl">1.</span> Female                 <span class="dv">10</span> (<span class="fl">40.0</span>%)           IIIIIIII            <span class="dv">25</span>         <span class="dv">0</span>        </span>
<span id="cb14-38"><a href="data-cleaning.html#cb14-38" aria-hidden="true" tabindex="-1"></a>     [factor]    <span class="fl">2.</span> Male                   <span class="dv">10</span> (<span class="fl">40.0</span><span class="sc">%)           IIIIIIII            (100.0%</span>)   (<span class="fl">0.0</span>%)   </span>
<span id="cb14-39"><a href="data-cleaning.html#cb14-39" aria-hidden="true" tabindex="-1"></a>                 <span class="fl">3.</span> Missing                 <span class="dv">5</span> (<span class="fl">20.0</span>%)           IIII                                    </span>
<span id="cb14-40"><a href="data-cleaning.html#cb14-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-41"><a href="data-cleaning.html#cb14-41" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>    bldgrp      <span class="fl">1.</span> A                      <span class="dv">5</span> (<span class="fl">20.8</span>%)            IIII                <span class="dv">24</span>         <span class="dv">1</span>        </span>
<span id="cb14-42"><a href="data-cleaning.html#cb14-42" aria-hidden="true" tabindex="-1"></a>     [factor]    <span class="fl">2.</span> B                      <span class="dv">2</span> ( <span class="fl">8.3</span><span class="sc">%)            I                   (96.0%</span>)    (<span class="fl">4.0</span>%)   </span>
<span id="cb14-43"><a href="data-cleaning.html#cb14-43" aria-hidden="true" tabindex="-1"></a>                 <span class="fl">3.</span> O                      <span class="dv">9</span> (<span class="fl">37.5</span>%)            IIIIIII                                 </span>
<span id="cb14-44"><a href="data-cleaning.html#cb14-44" aria-hidden="true" tabindex="-1"></a>                 <span class="fl">4.</span> AB                     <span class="dv">7</span> (<span class="fl">29.2</span>%)            IIIII                                   </span>
<span id="cb14-45"><a href="data-cleaning.html#cb14-45" aria-hidden="true" tabindex="-1"></a>                 <span class="fl">5.</span> Missing                <span class="dv">1</span> ( <span class="fl">4.2</span>%)                                                    </span>
<span id="cb14-46"><a href="data-cleaning.html#cb14-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-47"><a href="data-cleaning.html#cb14-47" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>    pdonor      <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="fl">5.6</span> (<span class="fl">19.5</span>)    <span class="dv">0</span> <span class="sc">:</span> <span class="dv">4</span> (<span class="fl">16.0</span>%)        III                 <span class="dv">25</span>         <span class="dv">0</span>        </span>
<span id="cb14-48"><a href="data-cleaning.html#cb14-48" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>          <span class="dv">1</span> <span class="sc">:</span> <span class="dv">7</span> (<span class="fl">28.0</span><span class="sc">%)        IIIII               (100.0%</span>)   (<span class="fl">0.0</span>%)   </span>
<span id="cb14-49"><a href="data-cleaning.html#cb14-49" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span> <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">&lt;</span> <span class="dv">99</span>                <span class="dv">2</span> <span class="sc">:</span> <span class="dv">7</span> (<span class="fl">28.0</span>%)        IIIII                                   </span>
<span id="cb14-50"><a href="data-cleaning.html#cb14-50" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="dv">2</span> (<span class="fl">3.5</span>)        <span class="dv">3</span> <span class="sc">:</span> <span class="dv">5</span> (<span class="fl">20.0</span>%)        IIII                                    </span>
<span id="cb14-51"><a href="data-cleaning.html#cb14-51" aria-hidden="true" tabindex="-1"></a>                                           <span class="dv">4</span> <span class="sc">:</span> <span class="dv">1</span> ( <span class="fl">4.0</span>%)                                                </span>
<span id="cb14-52"><a href="data-cleaning.html#cb14-52" aria-hidden="true" tabindex="-1"></a>                                           <span class="dv">99</span> <span class="sc">:</span> <span class="dv">1</span> ( <span class="fl">4.0</span>%)                                               </span>
<span id="cb14-53"><a href="data-cleaning.html#cb14-53" aria-hidden="true" tabindex="-1"></a><span class="sc">--------------------------------------------------------------------------------------------------------</span></span></code></pre></div>
</div>
<div id="cheking-for-duplicated-records" class="section level2" number="5.6">
<h2>
<span class="header-section-number">5.6</span> Cheking for duplicated records<a class="anchor" aria-label="anchor" href="#cheking-for-duplicated-records"><i class="fas fa-link"></i></a>
</h2>
<p>We begin official data cleaning by checking if we have duplicate records in our
data</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data-cleaning.html#cb15-1" aria-hidden="true" tabindex="-1"></a>blood3 <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">get_dupes</span>()</span>
<span id="cb15-2"><a href="data-cleaning.html#cb15-2" aria-hidden="true" tabindex="-1"></a>No variable names specified <span class="sc">-</span> using all columns.</span>
<span id="cb15-3"><a href="data-cleaning.html#cb15-3" aria-hidden="true" tabindex="-1"></a>No duplicate combinations found of<span class="sc">:</span> id, hb, hct, sex, bldgrp, pdonor</span>
<span id="cb15-4"><a href="data-cleaning.html#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 0 × 7</span></span>
<span id="cb15-5"><a href="data-cleaning.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ℹ 7 variables: id &lt;dbl&gt;, hb &lt;dbl&gt;, hct &lt;dbl&gt;, sex &lt;fct&gt;,</span></span>
<span id="cb15-6"><a href="data-cleaning.html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   bldgrp &lt;fct&gt;, pdonor &lt;dbl&gt;, dupe_count &lt;int&gt;</span></span></code></pre></div>
</div>
<div id="cleaning-individual-variables-1" class="section level2" number="5.7">
<h2>
<span class="header-section-number">5.7</span> Cleaning individual variables<a class="anchor" aria-label="anchor" href="#cleaning-individual-variables-1"><i class="fas fa-link"></i></a>
</h2>
<p>Next we begin to sort the variables one by one. We begin with the study id
variable. We begin by looking for duplicated study ids.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data-cleaning.html#cb16-1" aria-hidden="true" tabindex="-1"></a>blood3 <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">get_dupes</span>(id)</span>
<span id="cb16-2"><a href="data-cleaning.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 2 × 7</span></span>
<span id="cb16-3"><a href="data-cleaning.html#cb16-3" aria-hidden="true" tabindex="-1"></a>     id dupe_count    hb   hct sex    bldgrp pdonor</span>
<span id="cb16-4"><a href="data-cleaning.html#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>      <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>fct<span class="sc">&gt;</span>  <span class="er">&lt;</span>fct<span class="sc">&gt;</span>   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb16-5"><a href="data-cleaning.html#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>    <span class="dv">14</span>          <span class="dv">2</span>  <span class="fl">12.2</span>  <span class="fl">36.8</span> Female AB          <span class="dv">1</span></span>
<span id="cb16-6"><a href="data-cleaning.html#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">14</span>          <span class="dv">2</span>  <span class="fl">16.4</span>  <span class="fl">48.8</span> Female <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>        <span class="dv">2</span></span></code></pre></div>
<p>Study id 14 is duplicated! Next we visually inspect the study ids</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-cleaning.html#cb17-1" aria-hidden="true" tabindex="-1"></a>blood3<span class="sc">$</span>id</span>
<span id="cb17-2"><a href="data-cleaning.html#cb17-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>]  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">4</span>  <span class="dv">5</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">8</span>  <span class="dv">9</span> <span class="dv">10</span> <span class="dv">11</span> <span class="dv">12</span> <span class="dv">13</span> <span class="dv">14</span> <span class="dv">14</span> <span class="dv">16</span> <span class="dv">17</span> <span class="dv">18</span></span>
<span id="cb17-3"><a href="data-cleaning.html#cb17-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">19</span>] <span class="dv">19</span> <span class="dv">20</span> <span class="dv">21</span> <span class="dv">22</span> <span class="dv">23</span> <span class="dv">24</span> <span class="dv">25</span></span></code></pre></div>
<p>It looks like the study ids are in numeric order from 1 to 25 but 14 is duplicated while 15 is
missing. We solve this by writing a new study id variable. Afterwards we check to see if there are
any more duplicates.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="data-cleaning.html#cb18-1" aria-hidden="true" tabindex="-1"></a>blood3 <span class="ot">&lt;-</span> </span>
<span id="cb18-2"><a href="data-cleaning.html#cb18-2" aria-hidden="true" tabindex="-1"></a>    blood3 <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="data-cleaning.html#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">25</span>) </span>
<span id="cb18-4"><a href="data-cleaning.html#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="data-cleaning.html#cb18-5" aria-hidden="true" tabindex="-1"></a>blood3 <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">get_dupes</span>(id)</span>
<span id="cb18-6"><a href="data-cleaning.html#cb18-6" aria-hidden="true" tabindex="-1"></a>No duplicate combinations found of<span class="sc">:</span> id</span>
<span id="cb18-7"><a href="data-cleaning.html#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 0 × 7</span></span>
<span id="cb18-8"><a href="data-cleaning.html#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ℹ 7 variables: id &lt;int&gt;, dupe_count &lt;int&gt;, hb &lt;dbl&gt;,</span></span>
<span id="cb18-9"><a href="data-cleaning.html#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   hct &lt;dbl&gt;, sex &lt;fct&gt;, bldgrp &lt;fct&gt;, pdonor &lt;dbl&gt;</span></span></code></pre></div>
<p>Next we inspect the <code>hb</code> variable with a summary and a boxplot. We observe from
the summary none of the hemoglobin observations is missing. The boxplot of
the <code>hb</code> is as shown in A below. We observe 4 are outliers and one looks very
extreme.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data-cleaning.html#cb19-1" aria-hidden="true" tabindex="-1"></a>blood3 <span class="sc">%$%</span> <span class="fu">summary</span>(hb)</span>
<span id="cb19-2"><a href="data-cleaning.html#cb19-2" aria-hidden="true" tabindex="-1"></a>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span id="cb19-3"><a href="data-cleaning.html#cb19-3" aria-hidden="true" tabindex="-1"></a>   <span class="fl">1.00</span>   <span class="fl">10.40</span>   <span class="fl">11.00</span>   <span class="fl">10.99</span>   <span class="fl">11.90</span>   <span class="fl">16.40</span> </span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">A</span> <span class="op">&lt;-</span></span>
<span>    <span class="va">blood3</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">hb</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_boxplot</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Hemoglobin (mg/dl)"</span>,</span>
<span>         title <span class="op">=</span> <span class="st">"Boxplot of hemoglobin of participants </span></span>
<span><span class="st">         with outliers"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>We convert this observation to missing as below.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">blood3</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">blood3</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>hb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">hb</span> <span class="op">&lt;</span> <span class="fl">4</span>, <span class="cn">NA</span>, <span class="va">hb</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data-cleaning.html#cb22-1" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span></span>
<span id="cb22-2"><a href="data-cleaning.html#cb22-2" aria-hidden="true" tabindex="-1"></a>    blood3 <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="data-cleaning.html#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> hb)) <span class="sc">+</span></span>
<span id="cb22-4"><a href="data-cleaning.html#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">fill =</span> <span class="st">"grey"</span>) <span class="sc">+</span></span>
<span id="cb22-5"><a href="data-cleaning.html#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Hemoglobin (mg/dl)"</span>,</span>
<span id="cb22-6"><a href="data-cleaning.html#cb22-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Boxplot of hemoglobin of participants </span></span>
<span id="cb22-7"><a href="data-cleaning.html#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="st">         after outlier removed"</span>) <span class="sc">+</span></span>
<span id="cb22-8"><a href="data-cleaning.html#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span>
<span id="cb22-9"><a href="data-cleaning.html#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="data-cleaning.html#cb22-10" aria-hidden="true" tabindex="-1"></a>A <span class="sc">+</span> B <span class="sc">+</span> <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">'A'</span>)</span>
<span id="cb22-11"><a href="data-cleaning.html#cb22-11" aria-hidden="true" tabindex="-1"></a>Warning<span class="sc">:</span> Removed <span class="dv">1</span> rows containing non<span class="sc">-</span>finite values</span>
<span id="cb22-12"><a href="data-cleaning.html#cb22-12" aria-hidden="true" tabindex="-1"></a>(<span class="st">`</span><span class="at">stat_boxplot()</span><span class="st">`</span>).</span></code></pre></div>
<div class="inline-figure"><img src="04-Data-Cleaning_files/figure-html/unnamed-chunk-15-1.png" width="672"></div>
<p>And redraw the boxplot without the outlier.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">blood3</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">drop_na</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">hb</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_boxplot</span><span class="op">(</span>fill <span class="op">=</span><span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Hemoglobin (mg/dl)"</span>,</span>
<span>         title <span class="op">=</span> <span class="st">"Boxplot of hemoglobin of participants"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="04-Data-Cleaning_files/figure-html/unnamed-chunk-16-1.png" width="672"></div>
<p>Next we focus on the <code>hct</code> variable. It is of note that it has <em>99</em> which represents ‘missing’. We
therefore remove that as below</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">blood3</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">blood3</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>hct <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">hct</span> <span class="op">&gt;</span><span class="fl">90</span>, <span class="cn">NA</span>, <span class="va">hct</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>And draw the boxplot as below</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">blood3</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">drop_na</span><span class="op">(</span><span class="va">hct</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">hct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu">geom_boxplot</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span><span class="op">+</span> </span>
<span>    <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Hematocrit (%)"</span>,</span>
<span>         title <span class="op">=</span> <span class="st">"Boxplot of hematocrit of participants"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="04-Data-Cleaning_files/figure-html/unnamed-chunk-18-1.png" width="672"></div>
<p>Because we know the hematocrit has a relationship with the hemoglobin, we use a scatter plot to
visulie and possibly pick up suspicious data.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">blood3</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">drop_na</span><span class="op">(</span><span class="va">hb</span>, <span class="va">hct</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">hct</span>, y <span class="op">=</span> <span class="va">hb</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu">geom_point</span><span class="op">(</span>col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Hematocrit (%)"</span>,</span>
<span>         y <span class="op">=</span> <span class="st">"Hemoglobin (mg/dl)"</span>,</span>
<span>         title <span class="op">=</span> <span class="st">"Scatterplot showing the relationship between the hematocrit and hemoglobin"</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="04-Data-Cleaning_files/figure-html/unnamed-chunk-19-1.png" width="672"></div>
<p>Next we inspect the <code>sex</code> variable</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data-cleaning.html#cb27-1" aria-hidden="true" tabindex="-1"></a>blood3 <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="data-cleaning.html#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(sex)</span>
<span id="cb27-3"><a href="data-cleaning.html#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 2</span></span>
<span id="cb27-4"><a href="data-cleaning.html#cb27-4" aria-hidden="true" tabindex="-1"></a>  sex         n</span>
<span id="cb27-5"><a href="data-cleaning.html#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>fct<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb27-6"><a href="data-cleaning.html#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Female     <span class="dv">10</span></span>
<span id="cb27-7"><a href="data-cleaning.html#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Male       <span class="dv">10</span></span>
<span id="cb27-8"><a href="data-cleaning.html#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Missing     <span class="dv">5</span></span></code></pre></div>
<p>We then convert the <em>“Missing”</em> category to <code>NA</code></p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">blood3</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">blood3</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>sex <span class="op">=</span> <span class="fu">fct_recode</span><span class="op">(</span><span class="va">sex</span>, <span class="cn">NULL</span> <span class="op">=</span> <span class="st">"Missing"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>And then check</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data-cleaning.html#cb29-1" aria-hidden="true" tabindex="-1"></a>blood3 <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="data-cleaning.html#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(sex)</span>
<span id="cb29-3"><a href="data-cleaning.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 2</span></span>
<span id="cb29-4"><a href="data-cleaning.html#cb29-4" aria-hidden="true" tabindex="-1"></a>  sex        n</span>
<span id="cb29-5"><a href="data-cleaning.html#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>fct<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb29-6"><a href="data-cleaning.html#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> Female    <span class="dv">10</span></span>
<span id="cb29-7"><a href="data-cleaning.html#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> Male      <span class="dv">10</span></span>
<span id="cb29-8"><a href="data-cleaning.html#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>       <span class="dv">5</span></span></code></pre></div>
<p>Next we sort out the <code>bldgrp</code> variable</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="data-cleaning.html#cb30-1" aria-hidden="true" tabindex="-1"></a>blood3 <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="data-cleaning.html#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(bldgrp)</span>
<span id="cb30-3"><a href="data-cleaning.html#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 6 × 2</span></span>
<span id="cb30-4"><a href="data-cleaning.html#cb30-4" aria-hidden="true" tabindex="-1"></a>  bldgrp      n</span>
<span id="cb30-5"><a href="data-cleaning.html#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>fct<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb30-6"><a href="data-cleaning.html#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> A           <span class="dv">5</span></span>
<span id="cb30-7"><a href="data-cleaning.html#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> B           <span class="dv">2</span></span>
<span id="cb30-8"><a href="data-cleaning.html#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> O           <span class="dv">9</span></span>
<span id="cb30-9"><a href="data-cleaning.html#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> AB          <span class="dv">7</span></span>
<span id="cb30-10"><a href="data-cleaning.html#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> Missing     <span class="dv">1</span></span>
<span id="cb30-11"><a href="data-cleaning.html#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>        <span class="dv">1</span></span></code></pre></div>
<p>We convert <em>Missing</em> to <code>NA</code> and visualize the variable</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data-cleaning.html#cb31-1" aria-hidden="true" tabindex="-1"></a>blood3 <span class="ot">&lt;-</span></span>
<span id="cb31-2"><a href="data-cleaning.html#cb31-2" aria-hidden="true" tabindex="-1"></a>    blood3 <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="data-cleaning.html#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">bldgrp =</span> <span class="fu">fct_recode</span>(bldgrp, <span class="at">NULL =</span> <span class="st">"Missing"</span>))</span>
<span id="cb31-4"><a href="data-cleaning.html#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="data-cleaning.html#cb31-5" aria-hidden="true" tabindex="-1"></a>blood3 <span class="sc">%&gt;%</span> <span class="fu">count</span>(bldgrp)</span>
<span id="cb31-6"><a href="data-cleaning.html#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 5 × 2</span></span>
<span id="cb31-7"><a href="data-cleaning.html#cb31-7" aria-hidden="true" tabindex="-1"></a>  bldgrp     n</span>
<span id="cb31-8"><a href="data-cleaning.html#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>fct<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb31-9"><a href="data-cleaning.html#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> A          <span class="dv">5</span></span>
<span id="cb31-10"><a href="data-cleaning.html#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> B          <span class="dv">2</span></span>
<span id="cb31-11"><a href="data-cleaning.html#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> O          <span class="dv">9</span></span>
<span id="cb31-12"><a href="data-cleaning.html#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> AB         <span class="dv">7</span></span>
<span id="cb31-13"><a href="data-cleaning.html#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>       <span class="dv">2</span></span></code></pre></div>
<p>Next we sort out the <code>pdonor</code></p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">blood3</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">blood3</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>pdonor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">pdonor</span> <span class="op">==</span> <span class="fl">99</span>, <span class="cn">NA</span>, <span class="va">pdonor</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="visualising-the-cleaned-data" class="section level2" number="5.8">
<h2>
<span class="header-section-number">5.8</span> Visualising the cleaned data<a class="anchor" aria-label="anchor" href="#visualising-the-cleaned-data"><i class="fas fa-link"></i></a>
</h2>
<p>Finally we summarize the data as below</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data-cleaning.html#cb33-1" aria-hidden="true" tabindex="-1"></a>blood3 <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="data-cleaning.html#cb33-2" aria-hidden="true" tabindex="-1"></a>    summarytools<span class="sc">::</span><span class="fu">dfSummary</span>()</span>
<span id="cb33-3"><a href="data-cleaning.html#cb33-3" aria-hidden="true" tabindex="-1"></a>Data Frame Summary  </span>
<span id="cb33-4"><a href="data-cleaning.html#cb33-4" aria-hidden="true" tabindex="-1"></a>blood3  </span>
<span id="cb33-5"><a href="data-cleaning.html#cb33-5" aria-hidden="true" tabindex="-1"></a>Dimensions<span class="sc">:</span> <span class="dv">25</span> x <span class="dv">6</span>  </span>
<span id="cb33-6"><a href="data-cleaning.html#cb33-6" aria-hidden="true" tabindex="-1"></a>Duplicates<span class="sc">:</span> <span class="dv">0</span>  </span>
<span id="cb33-7"><a href="data-cleaning.html#cb33-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-8"><a href="data-cleaning.html#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="sc">--------------------------------------------------------------------------------------------------</span></span>
<span id="cb33-9"><a href="data-cleaning.html#cb33-9" aria-hidden="true" tabindex="-1"></a>No   Variable    Stats <span class="sc">/</span> Values           <span class="fu">Freqs</span> (% of Valid)   Graph          Valid      Missing  </span>
<span id="cb33-10"><a href="data-cleaning.html#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="sc">----</span> <span class="sc">-----------</span> <span class="sc">------------------------</span> <span class="sc">--------------------</span> <span class="sc">--------------</span> <span class="sc">----------</span> <span class="sc">---------</span></span>
<span id="cb33-11"><a href="data-cleaning.html#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>    id          <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="dv">13</span> (<span class="fl">7.4</span>)     <span class="dv">25</span> distinct values   <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>      <span class="dv">25</span>         <span class="dv">0</span>        </span>
<span id="cb33-12"><a href="data-cleaning.html#cb33-12" aria-hidden="true" tabindex="-1"></a>     [integer]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>         (Integer sequence)   <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>      (<span class="fl">100.0</span><span class="sc">%)   (0.0%</span>)   </span>
<span id="cb33-13"><a href="data-cleaning.html#cb33-13" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">1</span> <span class="sc">&lt;</span> <span class="dv">13</span> <span class="sc">&lt;</span> <span class="dv">25</span>                                   <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>                          </span>
<span id="cb33-14"><a href="data-cleaning.html#cb33-14" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="dv">12</span> (<span class="fl">0.6</span>)                           <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>                          </span>
<span id="cb33-15"><a href="data-cleaning.html#cb33-15" aria-hidden="true" tabindex="-1"></a>                                                               <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>                          </span>
<span id="cb33-16"><a href="data-cleaning.html#cb33-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-17"><a href="data-cleaning.html#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    hb          <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="fl">11.4</span> (<span class="dv">2</span>)     <span class="dv">20</span> distinct values       <span class="sc">:</span>          <span class="dv">24</span>         <span class="dv">1</span>        </span>
<span id="cb33-18"><a href="data-cleaning.html#cb33-18" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>                                  <span class="er">:</span>          (<span class="fl">96.0</span><span class="sc">%)    (4.0%</span>)   </span>
<span id="cb33-19"><a href="data-cleaning.html#cb33-19" aria-hidden="true" tabindex="-1"></a>                 <span class="fl">7.8</span> <span class="sc">&lt;</span> <span class="fl">11.1</span> <span class="sc">&lt;</span> <span class="fl">16.4</span>                                 <span class="sc">:</span>                              </span>
<span id="cb33-20"><a href="data-cleaning.html#cb33-20" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="fl">1.5</span> (<span class="fl">0.2</span>)                            . <span class="sc">:</span>                              </span>
<span id="cb33-21"><a href="data-cleaning.html#cb33-21" aria-hidden="true" tabindex="-1"></a>                                                               . <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> . <span class="sc">:</span>                        </span>
<span id="cb33-22"><a href="data-cleaning.html#cb33-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-23"><a href="data-cleaning.html#cb33-23" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>    hct         <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="fl">34.1</span> (<span class="fl">5.4</span>)   <span class="dv">23</span> distinct values       <span class="sc">:</span>          <span class="dv">23</span>         <span class="dv">2</span>        </span>
<span id="cb33-24"><a href="data-cleaning.html#cb33-24" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>                                  <span class="er">:</span> .        (<span class="fl">92.0</span><span class="sc">%)    (8.0%</span>)   </span>
<span id="cb33-25"><a href="data-cleaning.html#cb33-25" aria-hidden="true" tabindex="-1"></a>                 <span class="fl">24.2</span> <span class="sc">&lt;</span> <span class="fl">34.2</span> <span class="sc">&lt;</span> <span class="fl">48.8</span>                                <span class="sc">:</span> <span class="er">:</span>                            </span>
<span id="cb33-26"><a href="data-cleaning.html#cb33-26" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="fl">4.6</span> (<span class="fl">0.2</span>)                            . <span class="sc">:</span> <span class="er">:</span>                            </span>
<span id="cb33-27"><a href="data-cleaning.html#cb33-27" aria-hidden="true" tabindex="-1"></a>                                                               . <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> . .                        </span>
<span id="cb33-28"><a href="data-cleaning.html#cb33-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-29"><a href="data-cleaning.html#cb33-29" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>    sex         <span class="fl">1.</span> Female                <span class="dv">10</span> (<span class="fl">50.0</span>%)           IIIIIIIIII     <span class="dv">20</span>         <span class="dv">5</span>        </span>
<span id="cb33-30"><a href="data-cleaning.html#cb33-30" aria-hidden="true" tabindex="-1"></a>     [factor]    <span class="fl">2.</span> Male                  <span class="dv">10</span> (<span class="fl">50.0</span><span class="sc">%)           IIIIIIIIII     (80.0%</span>)    (<span class="fl">20.0</span>%)  </span>
<span id="cb33-31"><a href="data-cleaning.html#cb33-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-32"><a href="data-cleaning.html#cb33-32" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>    bldgrp      <span class="fl">1.</span> A                     <span class="dv">5</span> (<span class="fl">21.7</span>%)            IIII           <span class="dv">23</span>         <span class="dv">2</span>        </span>
<span id="cb33-33"><a href="data-cleaning.html#cb33-33" aria-hidden="true" tabindex="-1"></a>     [factor]    <span class="fl">2.</span> B                     <span class="dv">2</span> ( <span class="fl">8.7</span><span class="sc">%)            I              (92.0%</span>)    (<span class="fl">8.0</span>%)   </span>
<span id="cb33-34"><a href="data-cleaning.html#cb33-34" aria-hidden="true" tabindex="-1"></a>                 <span class="fl">3.</span> O                     <span class="dv">9</span> (<span class="fl">39.1</span>%)            IIIIIII                            </span>
<span id="cb33-35"><a href="data-cleaning.html#cb33-35" aria-hidden="true" tabindex="-1"></a>                 <span class="fl">4.</span> AB                    <span class="dv">7</span> (<span class="fl">30.4</span>%)            IIIIII                             </span>
<span id="cb33-36"><a href="data-cleaning.html#cb33-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-37"><a href="data-cleaning.html#cb33-37" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>    pdonor      <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="fl">1.7</span> (<span class="fl">1.1</span>)    <span class="dv">0</span> <span class="sc">:</span> <span class="dv">4</span> (<span class="fl">16.7</span>%)        III            <span class="dv">24</span>         <span class="dv">1</span>        </span>
<span id="cb33-38"><a href="data-cleaning.html#cb33-38" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>         <span class="dv">1</span> <span class="sc">:</span> <span class="dv">7</span> (<span class="fl">29.2</span><span class="sc">%)        IIIII          (96.0%</span>)    (<span class="fl">4.0</span>%)   </span>
<span id="cb33-39"><a href="data-cleaning.html#cb33-39" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span> <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">&lt;</span> <span class="dv">4</span>                <span class="dv">2</span> <span class="sc">:</span> <span class="dv">7</span> (<span class="fl">29.2</span>%)        IIIII                              </span>
<span id="cb33-40"><a href="data-cleaning.html#cb33-40" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="fl">1.2</span> (<span class="fl">0.7</span>)     <span class="dv">3</span> <span class="sc">:</span> <span class="dv">5</span> (<span class="fl">20.8</span>%)        IIII                               </span>
<span id="cb33-41"><a href="data-cleaning.html#cb33-41" aria-hidden="true" tabindex="-1"></a>                                          <span class="dv">4</span> <span class="sc">:</span> <span class="dv">1</span> ( <span class="fl">4.2</span>%)                                           </span>
<span id="cb33-42"><a href="data-cleaning.html#cb33-42" aria-hidden="true" tabindex="-1"></a><span class="sc">--------------------------------------------------------------------------------------------------</span></span></code></pre></div>
</div>
<div id="generating-new-variables" class="section level2" number="5.9">
<h2>
<span class="header-section-number">5.9</span> Generating new variables<a class="anchor" aria-label="anchor" href="#generating-new-variables"><i class="fas fa-link"></i></a>
</h2>
<p>Often after cleaning individual variables a data analyst will be required to
generate new variables from the old ones. SWe will put this into practice by
generating the presence of Anemia if the hb is less than 11g/dl.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data-cleaning.html#cb34-1" aria-hidden="true" tabindex="-1"></a>blood3 <span class="ot">&lt;-</span></span>
<span id="cb34-2"><a href="data-cleaning.html#cb34-2" aria-hidden="true" tabindex="-1"></a>    blood3 <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="data-cleaning.html#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">anemia =</span> <span class="fu">case_when</span>(hb <span class="sc">&lt;</span> <span class="dv">11</span> <span class="sc">~</span> <span class="st">"Yes"</span>, hb <span class="sc">&gt;=</span> <span class="dv">11</span> <span class="sc">~</span> <span class="st">"No"</span>) <span class="sc">%&gt;%</span> <span class="fu">factor</span>())</span>
<span id="cb34-4"><a href="data-cleaning.html#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="data-cleaning.html#cb34-5" aria-hidden="true" tabindex="-1"></a>summarytools<span class="sc">::</span><span class="fu">dfSummary</span>(blood3)</span>
<span id="cb34-6"><a href="data-cleaning.html#cb34-6" aria-hidden="true" tabindex="-1"></a>Data Frame Summary  </span>
<span id="cb34-7"><a href="data-cleaning.html#cb34-7" aria-hidden="true" tabindex="-1"></a>blood3  </span>
<span id="cb34-8"><a href="data-cleaning.html#cb34-8" aria-hidden="true" tabindex="-1"></a>Dimensions<span class="sc">:</span> <span class="dv">25</span> x <span class="dv">7</span>  </span>
<span id="cb34-9"><a href="data-cleaning.html#cb34-9" aria-hidden="true" tabindex="-1"></a>Duplicates<span class="sc">:</span> <span class="dv">0</span>  </span>
<span id="cb34-10"><a href="data-cleaning.html#cb34-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-11"><a href="data-cleaning.html#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="sc">--------------------------------------------------------------------------------------------------</span></span>
<span id="cb34-12"><a href="data-cleaning.html#cb34-12" aria-hidden="true" tabindex="-1"></a>No   Variable    Stats <span class="sc">/</span> Values           <span class="fu">Freqs</span> (% of Valid)   Graph          Valid      Missing  </span>
<span id="cb34-13"><a href="data-cleaning.html#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="sc">----</span> <span class="sc">-----------</span> <span class="sc">------------------------</span> <span class="sc">--------------------</span> <span class="sc">--------------</span> <span class="sc">----------</span> <span class="sc">---------</span></span>
<span id="cb34-14"><a href="data-cleaning.html#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>    id          <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="dv">13</span> (<span class="fl">7.4</span>)     <span class="dv">25</span> distinct values   <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>      <span class="dv">25</span>         <span class="dv">0</span>        </span>
<span id="cb34-15"><a href="data-cleaning.html#cb34-15" aria-hidden="true" tabindex="-1"></a>     [integer]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>         (Integer sequence)   <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>      (<span class="fl">100.0</span><span class="sc">%)   (0.0%</span>)   </span>
<span id="cb34-16"><a href="data-cleaning.html#cb34-16" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">1</span> <span class="sc">&lt;</span> <span class="dv">13</span> <span class="sc">&lt;</span> <span class="dv">25</span>                                   <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>                          </span>
<span id="cb34-17"><a href="data-cleaning.html#cb34-17" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="dv">12</span> (<span class="fl">0.6</span>)                           <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>                          </span>
<span id="cb34-18"><a href="data-cleaning.html#cb34-18" aria-hidden="true" tabindex="-1"></a>                                                               <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span> <span class="er">:</span>                          </span>
<span id="cb34-19"><a href="data-cleaning.html#cb34-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-20"><a href="data-cleaning.html#cb34-20" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    hb          <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="fl">11.4</span> (<span class="dv">2</span>)     <span class="dv">20</span> distinct values       <span class="sc">:</span>          <span class="dv">24</span>         <span class="dv">1</span>        </span>
<span id="cb34-21"><a href="data-cleaning.html#cb34-21" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>                                  <span class="er">:</span>          (<span class="fl">96.0</span><span class="sc">%)    (4.0%</span>)   </span>
<span id="cb34-22"><a href="data-cleaning.html#cb34-22" aria-hidden="true" tabindex="-1"></a>                 <span class="fl">7.8</span> <span class="sc">&lt;</span> <span class="fl">11.1</span> <span class="sc">&lt;</span> <span class="fl">16.4</span>                                 <span class="sc">:</span>                              </span>
<span id="cb34-23"><a href="data-cleaning.html#cb34-23" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="fl">1.5</span> (<span class="fl">0.2</span>)                            . <span class="sc">:</span>                              </span>
<span id="cb34-24"><a href="data-cleaning.html#cb34-24" aria-hidden="true" tabindex="-1"></a>                                                               . <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> . <span class="sc">:</span>                        </span>
<span id="cb34-25"><a href="data-cleaning.html#cb34-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-26"><a href="data-cleaning.html#cb34-26" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>    hct         <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="fl">34.1</span> (<span class="fl">5.4</span>)   <span class="dv">23</span> distinct values       <span class="sc">:</span>          <span class="dv">23</span>         <span class="dv">2</span>        </span>
<span id="cb34-27"><a href="data-cleaning.html#cb34-27" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>                                  <span class="er">:</span> .        (<span class="fl">92.0</span><span class="sc">%)    (8.0%</span>)   </span>
<span id="cb34-28"><a href="data-cleaning.html#cb34-28" aria-hidden="true" tabindex="-1"></a>                 <span class="fl">24.2</span> <span class="sc">&lt;</span> <span class="fl">34.2</span> <span class="sc">&lt;</span> <span class="fl">48.8</span>                                <span class="sc">:</span> <span class="er">:</span>                            </span>
<span id="cb34-29"><a href="data-cleaning.html#cb34-29" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="fl">4.6</span> (<span class="fl">0.2</span>)                            . <span class="sc">:</span> <span class="er">:</span>                            </span>
<span id="cb34-30"><a href="data-cleaning.html#cb34-30" aria-hidden="true" tabindex="-1"></a>                                                               . <span class="sc">:</span> <span class="er">:</span> <span class="er">:</span> . .                        </span>
<span id="cb34-31"><a href="data-cleaning.html#cb34-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-32"><a href="data-cleaning.html#cb34-32" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>    sex         <span class="fl">1.</span> Female                <span class="dv">10</span> (<span class="fl">50.0</span>%)           IIIIIIIIII     <span class="dv">20</span>         <span class="dv">5</span>        </span>
<span id="cb34-33"><a href="data-cleaning.html#cb34-33" aria-hidden="true" tabindex="-1"></a>     [factor]    <span class="fl">2.</span> Male                  <span class="dv">10</span> (<span class="fl">50.0</span><span class="sc">%)           IIIIIIIIII     (80.0%</span>)    (<span class="fl">20.0</span>%)  </span>
<span id="cb34-34"><a href="data-cleaning.html#cb34-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-35"><a href="data-cleaning.html#cb34-35" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>    bldgrp      <span class="fl">1.</span> A                     <span class="dv">5</span> (<span class="fl">21.7</span>%)            IIII           <span class="dv">23</span>         <span class="dv">2</span>        </span>
<span id="cb34-36"><a href="data-cleaning.html#cb34-36" aria-hidden="true" tabindex="-1"></a>     [factor]    <span class="fl">2.</span> B                     <span class="dv">2</span> ( <span class="fl">8.7</span><span class="sc">%)            I              (92.0%</span>)    (<span class="fl">8.0</span>%)   </span>
<span id="cb34-37"><a href="data-cleaning.html#cb34-37" aria-hidden="true" tabindex="-1"></a>                 <span class="fl">3.</span> O                     <span class="dv">9</span> (<span class="fl">39.1</span>%)            IIIIIII                            </span>
<span id="cb34-38"><a href="data-cleaning.html#cb34-38" aria-hidden="true" tabindex="-1"></a>                 <span class="fl">4.</span> AB                    <span class="dv">7</span> (<span class="fl">30.4</span>%)            IIIIII                             </span>
<span id="cb34-39"><a href="data-cleaning.html#cb34-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-40"><a href="data-cleaning.html#cb34-40" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>    pdonor      <span class="fu">Mean</span> (sd) <span class="sc">:</span> <span class="fl">1.7</span> (<span class="fl">1.1</span>)    <span class="dv">0</span> <span class="sc">:</span> <span class="dv">4</span> (<span class="fl">16.7</span>%)        III            <span class="dv">24</span>         <span class="dv">1</span>        </span>
<span id="cb34-41"><a href="data-cleaning.html#cb34-41" aria-hidden="true" tabindex="-1"></a>     [numeric]   min <span class="sc">&lt;</span> med <span class="sc">&lt;</span> max<span class="sc">:</span>         <span class="dv">1</span> <span class="sc">:</span> <span class="dv">7</span> (<span class="fl">29.2</span><span class="sc">%)        IIIII          (96.0%</span>)    (<span class="fl">4.0</span>%)   </span>
<span id="cb34-42"><a href="data-cleaning.html#cb34-42" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span> <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">&lt;</span> <span class="dv">4</span>                <span class="dv">2</span> <span class="sc">:</span> <span class="dv">7</span> (<span class="fl">29.2</span>%)        IIIII                              </span>
<span id="cb34-43"><a href="data-cleaning.html#cb34-43" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">IQR</span> (CV) <span class="sc">:</span> <span class="fl">1.2</span> (<span class="fl">0.7</span>)     <span class="dv">3</span> <span class="sc">:</span> <span class="dv">5</span> (<span class="fl">20.8</span>%)        IIII                               </span>
<span id="cb34-44"><a href="data-cleaning.html#cb34-44" aria-hidden="true" tabindex="-1"></a>                                          <span class="dv">4</span> <span class="sc">:</span> <span class="dv">1</span> ( <span class="fl">4.2</span>%)                                           </span>
<span id="cb34-45"><a href="data-cleaning.html#cb34-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-46"><a href="data-cleaning.html#cb34-46" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>    anemia      <span class="fl">1.</span> No                    <span class="dv">13</span> (<span class="fl">54.2</span>%)           IIIIIIIIII     <span class="dv">24</span>         <span class="dv">1</span>        </span>
<span id="cb34-47"><a href="data-cleaning.html#cb34-47" aria-hidden="true" tabindex="-1"></a>     [factor]    <span class="fl">2.</span> Yes                   <span class="dv">11</span> (<span class="fl">45.8</span><span class="sc">%)           IIIIIIIII      (96.0%</span>)    (<span class="fl">4.0</span>%)   </span>
<span id="cb34-48"><a href="data-cleaning.html#cb34-48" aria-hidden="true" tabindex="-1"></a><span class="sc">--------------------------------------------------------------------------------------------------</span></span></code></pre></div>

<pre><code>── Attaching core tidyverse packages ──── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors

Attaching package: 'magrittr'


The following object is masked from 'package:purrr':

    set_names


The following object is masked from 'package:tidyr':

    extract</code></pre>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="the-basics.html"><span class="header-section-number">4</span> The Basics</a></div>
<div class="next"><a href="descriptive-statistics-and-graphs.html"><span class="header-section-number">6</span> Descriptive Statistics and graphs</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-cleaning"><span class="header-section-number">5</span> Data Cleaning</a></li>
<li><a class="nav-link" href="#data-dictionary-or-codebook"><span class="header-section-number">5.1</span> Data dictionary or codebook</a></li>
<li><a class="nav-link" href="#importing-the-data-into-r"><span class="header-section-number">5.2</span> Importing the data into R</a></li>
<li><a class="nav-link" href="#visualising-the-data-in-r"><span class="header-section-number">5.3</span> Visualising the data in R</a></li>
<li><a class="nav-link" href="#describing-or-summarizing-the-data"><span class="header-section-number">5.4</span> Describing or summarizing the data</a></li>
<li><a class="nav-link" href="#cleaning-individual-variables"><span class="header-section-number">5.5</span> Cleaning individual variables</a></li>
<li><a class="nav-link" href="#cheking-for-duplicated-records"><span class="header-section-number">5.6</span> Cheking for duplicated records</a></li>
<li><a class="nav-link" href="#cleaning-individual-variables-1"><span class="header-section-number">5.7</span> Cleaning individual variables</a></li>
<li><a class="nav-link" href="#visualising-the-cleaned-data"><span class="header-section-number">5.8</span> Visualising the cleaned data</a></li>
<li><a class="nav-link" href="#generating-new-variables"><span class="header-section-number">5.9</span> Generating new variables</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/rstudio/bookdown-demo/blob/master/04-Data-Cleaning.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/rstudio/bookdown-demo/edit/master/04-Data-Cleaning.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Medical Statistics using R</strong>" was written by Samuel Blay Nguah. It was last built on 2023-05-21.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
