<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 7 Data wrangling | Medical Statistics using R</title>
<meta name="author" content="Samuel Blay Nguah">
<meta name="description" content="In this chapter, we begin to delve into the manipulation of data in the form of a data frame or tibble. In so doing, we will introduce the tidyverse package and the various verbs (function) it...">
<meta name="generator" content="bookdown 0.34 with bs4_book()">
<meta property="og:title" content="Chapter 7 Data wrangling | Medical Statistics using R">
<meta property="og:type" content="book">
<meta property="og:url" content="https://medstastwithr.netlify.app/data-wrangling.html">
<meta property="og:description" content="In this chapter, we begin to delve into the manipulation of data in the form of a data frame or tibble. In so doing, we will introduce the tidyverse package and the various verbs (function) it...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 7 Data wrangling | Medical Statistics using R">
<meta name="twitter:description" content="In this chapter, we begin to delve into the manipulation of data in the form of a data frame or tibble. In so doing, we will introduce the tidyverse package and the various verbs (function) it...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.0/transition.js"></script><script src="libs/bs3compat-0.5.0/tabs.js"></script><script src="libs/bs3compat-0.5.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="libs/tabwid-1.1.3/tabwid.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Medical Statistics using R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> About</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">2</span> Introduction</a></li>
<li><a class="" href="statistical-data-types.html"><span class="header-section-number">3</span> Statistical data types</a></li>
<li><a class="" href="r-data-types.html"><span class="header-section-number">4</span> R data types</a></li>
<li><a class="" href="data-structures-in-r.html"><span class="header-section-number">5</span> Data Structures in R</a></li>
<li><a class="" href="importing-data-into-r.html"><span class="header-section-number">6</span> Importing data into R</a></li>
<li><a class="active" href="data-wrangling.html"><span class="header-section-number">7</span> Data wrangling</a></li>
<li><a class="" href="data-cleaning.html"><span class="header-section-number">8</span> Data Cleaning</a></li>
<li><a class="" href="descriptive-statistics-of-categorical-data.html"><span class="header-section-number">9</span> Descriptive Statistics of Categorical Data</a></li>
<li><a class="" href="descriptive-statistics-of-continuous-data.html"><span class="header-section-number">10</span> Descriptive Statistics of Continuous Data</a></li>
<li><a class="" href="hypothesis-testing.html"><span class="header-section-number">11</span> Hypothesis-Testing</a></li>
<li><a class="" href="normality-of-data.html"><span class="header-section-number">12</span> Normality of data</a></li>
<li><a class="" href="analysis-of-numeric-data.html"><span class="header-section-number">13</span> Analysis of numeric data</a></li>
<li><a class="" href="analysis-of-categorical-data.html"><span class="header-section-number">14</span> Analysis of categorical data</a></li>
<li><a class="" href="risk-and-odds.html"><span class="header-section-number">15</span> Risk and Odds</a></li>
<li><a class="" href="confounding-and-interaction.html"><span class="header-section-number">16</span> Confounding and Interaction</a></li>
<li><a class="" href="diagnostic-tests.html"><span class="header-section-number">17</span> Diagnostic Tests</a></li>
<li><a class="" href="agreement.html"><span class="header-section-number">18</span> Agreement</a></li>
<li><a class="" href="receiver-operating-characteristic.html"><span class="header-section-number">19</span> Receiver Operating Characteristic</a></li>
<li><a class="" href="linear-regression.html"><span class="header-section-number">20</span> Linear Regression</a></li>
<li><a class="" href="logistic-regression.html"><span class="header-section-number">21</span> Logistic Regression</a></li>
<li><a class="" href="analysis-of-variance.html"><span class="header-section-number">22</span> Analysis of Variance</a></li>
<li><a class="" href="ordinal-logistic-regression.html"><span class="header-section-number">23</span> Ordinal logistic regression</a></li>
<li><a class="" href="survival-analysis.html"><span class="header-section-number">24</span> Survival analysis</a></li>
<li><a class="" href="cox-regression.html"><span class="header-section-number">25</span> Cox Regression</a></li>
<li><a class="" href="blocks.html"><span class="header-section-number">26</span> Blocks</a></li>
<li><a class="" href="footnotes-and-citations.html"><span class="header-section-number">27</span> Footnotes and citations</a></li>
<li><a class="" href="cross.html"><span class="header-section-number">28</span> Cross-references</a></li>
<li><a class="" href="parts.html"><span class="header-section-number">29</span> Parts</a></li>
<li><a class="" href="sharing-your-book.html"><span class="header-section-number">30</span> Sharing your book</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/sbnguah/MedStatsBook">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="data-wrangling" class="section level1" number="7">
<h1>
<span class="header-section-number">7</span> Data wrangling<a class="anchor" aria-label="anchor" href="#data-wrangling"><i class="fas fa-link"></i></a>
</h1>
<p>In this chapter, we begin to delve into the manipulation of data in the form of a
data frame or tibble. In so doing, we will introduce the <code>tidyverse</code> package
and the various verbs (function) it provides.</p>
<p>The <code>tidyverse</code> package is not just a single package but a composite of a group
of packages. These include among others the <code>dplyr</code> package. Most of the function
we will be employing in this chapter comes from <code>dplyr</code>.</p>
<p>We begin by reading in the <code>blood_donors.xls</code></p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="data-wrangling.html#cb80-1" tabindex="-1"></a>df_blood <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_xls</span>(<span class="st">"./Data/blood_donors_1.xls"</span>)</span>
<span id="cb80-2"><a href="data-wrangling.html#cb80-2" tabindex="-1"></a>df_blood</span>
<span id="cb80-3"><a href="data-wrangling.html#cb80-3" tabindex="-1"></a><span class="co"># A tibble: 25 × 6</span></span>
<span id="cb80-4"><a href="data-wrangling.html#cb80-4" tabindex="-1"></a>      id    hb   hct sex   bldgrp pdonor</span>
<span id="cb80-5"><a href="data-wrangling.html#cb80-5" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb80-6"><a href="data-wrangling.html#cb80-6" tabindex="-1"></a> <span class="dv">1</span>     <span class="dv">1</span> <span class="fl">10.5</span>   <span class="fl">31.8</span> Male  O           <span class="dv">3</span></span>
<span id="cb80-7"><a href="data-wrangling.html#cb80-7" tabindex="-1"></a> <span class="dv">2</span>     <span class="dv">2</span> <span class="fl">11.9</span>   <span class="fl">37.2</span> Male  AB          <span class="dv">0</span></span>
<span id="cb80-8"><a href="data-wrangling.html#cb80-8" tabindex="-1"></a> <span class="dv">3</span>     <span class="dv">3</span>  <span class="dv">1</span>     <span class="dv">26</span>   Male  A           <span class="dv">1</span></span>
<span id="cb80-9"><a href="data-wrangling.html#cb80-9" tabindex="-1"></a> <span class="dv">4</span>     <span class="dv">4</span>  <span class="fl">8.90</span>  <span class="fl">26.8</span> Male  A           <span class="dv">3</span></span>
<span id="cb80-10"><a href="data-wrangling.html#cb80-10" tabindex="-1"></a> <span class="dv">5</span>     <span class="dv">5</span>  <span class="fl">7.80</span>  <span class="fl">24.2</span> Male  A           <span class="dv">2</span></span>
<span id="cb80-11"><a href="data-wrangling.html#cb80-11" tabindex="-1"></a> <span class="dv">6</span>     <span class="dv">6</span> <span class="dv">10</span>     <span class="fl">30.9</span> Male  B           <span class="dv">1</span></span>
<span id="cb80-12"><a href="data-wrangling.html#cb80-12" tabindex="-1"></a> <span class="dv">7</span>     <span class="dv">7</span> <span class="fl">10.4</span>   <span class="fl">33.9</span> Male  B           <span class="dv">0</span></span>
<span id="cb80-13"><a href="data-wrangling.html#cb80-13" tabindex="-1"></a> <span class="dv">8</span>     <span class="dv">8</span> <span class="fl">11.3</span>   <span class="dv">35</span>   Male  O           <span class="dv">1</span></span>
<span id="cb80-14"><a href="data-wrangling.html#cb80-14" tabindex="-1"></a> <span class="dv">9</span>     <span class="dv">9</span> <span class="fl">16.4</span>   <span class="cn">NA</span>   Male  AB          <span class="dv">1</span></span>
<span id="cb80-15"><a href="data-wrangling.html#cb80-15" tabindex="-1"></a><span class="dv">10</span>    <span class="dv">10</span> <span class="fl">14.4</span>   <span class="fl">43.6</span> Male  AB          <span class="dv">1</span></span>
<span id="cb80-16"><a href="data-wrangling.html#cb80-16" tabindex="-1"></a><span class="co"># ℹ 15 more rows</span></span></code></pre></div>
<p>The output shows we have a 25-row and 6-column tibble.</p>
<div id="renaming-variables" class="section level2" number="7.1">
<h2>
<span class="header-section-number">7.1</span> Renaming variables<a class="anchor" aria-label="anchor" href="#renaming-variables"><i class="fas fa-link"></i></a>
</h2>
<p>Below we rename the variables <code>hb</code> to <code>hemog</code> and <code>id</code> to <code>studyid</code> using he
<code>rename</code> function, and then show the first 5 records with the <code>head</code> function.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="data-wrangling.html#cb81-1" tabindex="-1"></a>df_blood <span class="sc">%&gt;%</span> </span>
<span id="cb81-2"><a href="data-wrangling.html#cb81-2" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">hemog =</span> hb, <span class="at">studyid =</span> id) <span class="sc">%&gt;%</span> </span>
<span id="cb81-3"><a href="data-wrangling.html#cb81-3" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">5</span>)</span>
<span id="cb81-4"><a href="data-wrangling.html#cb81-4" tabindex="-1"></a><span class="co"># A tibble: 5 × 6</span></span>
<span id="cb81-5"><a href="data-wrangling.html#cb81-5" tabindex="-1"></a>  studyid hemog   hct sex   bldgrp pdonor</span>
<span id="cb81-6"><a href="data-wrangling.html#cb81-6" tabindex="-1"></a>    <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb81-7"><a href="data-wrangling.html#cb81-7" tabindex="-1"></a><span class="dv">1</span>       <span class="dv">1</span> <span class="fl">10.5</span>   <span class="fl">31.8</span> Male  O           <span class="dv">3</span></span>
<span id="cb81-8"><a href="data-wrangling.html#cb81-8" tabindex="-1"></a><span class="dv">2</span>       <span class="dv">2</span> <span class="fl">11.9</span>   <span class="fl">37.2</span> Male  AB          <span class="dv">0</span></span>
<span id="cb81-9"><a href="data-wrangling.html#cb81-9" tabindex="-1"></a><span class="dv">3</span>       <span class="dv">3</span>  <span class="dv">1</span>     <span class="dv">26</span>   Male  A           <span class="dv">1</span></span>
<span id="cb81-10"><a href="data-wrangling.html#cb81-10" tabindex="-1"></a><span class="dv">4</span>       <span class="dv">4</span>  <span class="fl">8.90</span>  <span class="fl">26.8</span> Male  A           <span class="dv">3</span></span>
<span id="cb81-11"><a href="data-wrangling.html#cb81-11" tabindex="-1"></a><span class="dv">5</span>       <span class="dv">5</span>  <span class="fl">7.80</span>  <span class="fl">24.2</span> Male  A           <span class="dv">2</span></span></code></pre></div>
</div>
<div id="sorting-data" class="section level2" number="7.2">
<h2>
<span class="header-section-number">7.2</span> Sorting data<a class="anchor" aria-label="anchor" href="#sorting-data"><i class="fas fa-link"></i></a>
</h2>
<p>Below we use the <code>arrange</code> function to sort the <code>bldgrp</code> in ascending order and
<code>hb</code> by descending order.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="data-wrangling.html#cb82-1" tabindex="-1"></a>df_blood <span class="sc">%&gt;%</span> </span>
<span id="cb82-2"><a href="data-wrangling.html#cb82-2" tabindex="-1"></a>    <span class="fu">arrange</span>(bldgrp, <span class="fu">desc</span>(hb))</span>
<span id="cb82-3"><a href="data-wrangling.html#cb82-3" tabindex="-1"></a><span class="co"># A tibble: 25 × 6</span></span>
<span id="cb82-4"><a href="data-wrangling.html#cb82-4" tabindex="-1"></a>      id    hb   hct sex    bldgrp pdonor</span>
<span id="cb82-5"><a href="data-wrangling.html#cb82-5" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>chr<span class="sc">&gt;</span>   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb82-6"><a href="data-wrangling.html#cb82-6" tabindex="-1"></a> <span class="dv">1</span>    <span class="dv">17</span>  <span class="fl">9.80</span>  <span class="fl">30.5</span> Female A           <span class="dv">4</span></span>
<span id="cb82-7"><a href="data-wrangling.html#cb82-7" tabindex="-1"></a> <span class="dv">2</span>    <span class="dv">21</span>  <span class="fl">9.10</span>  <span class="fl">28.0</span> <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>   A           <span class="dv">3</span></span>
<span id="cb82-8"><a href="data-wrangling.html#cb82-8" tabindex="-1"></a> <span class="dv">3</span>     <span class="dv">4</span>  <span class="fl">8.90</span>  <span class="fl">26.8</span> Male   A           <span class="dv">3</span></span>
<span id="cb82-9"><a href="data-wrangling.html#cb82-9" tabindex="-1"></a> <span class="dv">4</span>     <span class="dv">5</span>  <span class="fl">7.80</span>  <span class="fl">24.2</span> Male   A           <span class="dv">2</span></span>
<span id="cb82-10"><a href="data-wrangling.html#cb82-10" tabindex="-1"></a> <span class="dv">5</span>     <span class="dv">3</span>  <span class="dv">1</span>     <span class="dv">26</span>   Male   A           <span class="dv">1</span></span>
<span id="cb82-11"><a href="data-wrangling.html#cb82-11" tabindex="-1"></a> <span class="dv">6</span>     <span class="dv">9</span> <span class="fl">16.4</span>   <span class="cn">NA</span>   Male   AB          <span class="dv">1</span></span>
<span id="cb82-12"><a href="data-wrangling.html#cb82-12" tabindex="-1"></a> <span class="dv">7</span>    <span class="dv">10</span> <span class="fl">14.4</span>   <span class="fl">43.6</span> Male   AB          <span class="dv">1</span></span>
<span id="cb82-13"><a href="data-wrangling.html#cb82-13" tabindex="-1"></a> <span class="dv">8</span>    <span class="dv">16</span> <span class="fl">12.7</span>   <span class="dv">99</span>   Female AB          <span class="dv">0</span></span>
<span id="cb82-14"><a href="data-wrangling.html#cb82-14" tabindex="-1"></a> <span class="dv">9</span>    <span class="dv">24</span> <span class="fl">12.3</span>   <span class="fl">38.2</span> <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>   AB          <span class="dv">2</span></span>
<span id="cb82-15"><a href="data-wrangling.html#cb82-15" tabindex="-1"></a><span class="dv">10</span>    <span class="dv">14</span> <span class="fl">12.2</span>   <span class="fl">36.8</span> Female AB          <span class="dv">1</span></span>
<span id="cb82-16"><a href="data-wrangling.html#cb82-16" tabindex="-1"></a><span class="co"># ℹ 15 more rows</span></span></code></pre></div>
</div>
<div id="subsetting-data" class="section level2" number="7.3">
<h2>
<span class="header-section-number">7.3</span> Subsetting data<a class="anchor" aria-label="anchor" href="#subsetting-data"><i class="fas fa-link"></i></a>
</h2>
<p>In this subsection, we demonstrate the use of the <code>filter</code> and <code>select</code> function
to select specific records and variables in a tibble. Below we filter to select
all records with <code>hb</code> &gt; 12g/dl and keep only the <code>id</code>, <code>hb</code> and <code>sex</code>
columns.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="data-wrangling.html#cb83-1" tabindex="-1"></a>df_blood <span class="sc">%&gt;%</span> </span>
<span id="cb83-2"><a href="data-wrangling.html#cb83-2" tabindex="-1"></a>    <span class="fu">filter</span>(hb <span class="sc">&gt;</span> <span class="dv">12</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb83-3"><a href="data-wrangling.html#cb83-3" tabindex="-1"></a>    <span class="fu">select</span>(id, hb, sex)</span>
<span id="cb83-4"><a href="data-wrangling.html#cb83-4" tabindex="-1"></a><span class="co"># A tibble: 6 × 3</span></span>
<span id="cb83-5"><a href="data-wrangling.html#cb83-5" tabindex="-1"></a>     id    hb sex   </span>
<span id="cb83-6"><a href="data-wrangling.html#cb83-6" tabindex="-1"></a>  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> </span>
<span id="cb83-7"><a href="data-wrangling.html#cb83-7" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">9</span>  <span class="fl">16.4</span> Male  </span>
<span id="cb83-8"><a href="data-wrangling.html#cb83-8" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">10</span>  <span class="fl">14.4</span> Male  </span>
<span id="cb83-9"><a href="data-wrangling.html#cb83-9" tabindex="-1"></a><span class="dv">3</span>    <span class="dv">14</span>  <span class="fl">12.2</span> Female</span>
<span id="cb83-10"><a href="data-wrangling.html#cb83-10" tabindex="-1"></a><span class="dv">4</span>    <span class="dv">14</span>  <span class="fl">16.4</span> Female</span>
<span id="cb83-11"><a href="data-wrangling.html#cb83-11" tabindex="-1"></a><span class="dv">5</span>    <span class="dv">16</span>  <span class="fl">12.7</span> Female</span>
<span id="cb83-12"><a href="data-wrangling.html#cb83-12" tabindex="-1"></a><span class="dv">6</span>    <span class="dv">24</span>  <span class="fl">12.3</span> <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>  </span></code></pre></div>
</div>
<div id="generating-new-variables" class="section level2" number="7.4">
<h2>
<span class="header-section-number">7.4</span> Generating new variables<a class="anchor" aria-label="anchor" href="#generating-new-variables"><i class="fas fa-link"></i></a>
</h2>
<p>To generate new variables we use the <code>mutate</code> function. Based on our knowledge
that the hematocrit is approximately three times the haemoglobin we generate
a new variable, <code>hb_from_hct</code>.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="data-wrangling.html#cb84-1" tabindex="-1"></a>df_blood <span class="sc">%&gt;%</span> </span>
<span id="cb84-2"><a href="data-wrangling.html#cb84-2" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">hb_from_hct =</span> hct<span class="sc">/</span><span class="dv">3</span>)</span>
<span id="cb84-3"><a href="data-wrangling.html#cb84-3" tabindex="-1"></a><span class="co"># A tibble: 25 × 7</span></span>
<span id="cb84-4"><a href="data-wrangling.html#cb84-4" tabindex="-1"></a>      id    hb   hct sex   bldgrp pdonor hb_from_hct</span>
<span id="cb84-5"><a href="data-wrangling.html#cb84-5" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>       <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb84-6"><a href="data-wrangling.html#cb84-6" tabindex="-1"></a> <span class="dv">1</span>     <span class="dv">1</span> <span class="fl">10.5</span>   <span class="fl">31.8</span> Male  O           <span class="dv">3</span>       <span class="fl">10.6</span> </span>
<span id="cb84-7"><a href="data-wrangling.html#cb84-7" tabindex="-1"></a> <span class="dv">2</span>     <span class="dv">2</span> <span class="fl">11.9</span>   <span class="fl">37.2</span> Male  AB          <span class="dv">0</span>       <span class="fl">12.4</span> </span>
<span id="cb84-8"><a href="data-wrangling.html#cb84-8" tabindex="-1"></a> <span class="dv">3</span>     <span class="dv">3</span>  <span class="dv">1</span>     <span class="dv">26</span>   Male  A           <span class="dv">1</span>        <span class="fl">8.67</span></span>
<span id="cb84-9"><a href="data-wrangling.html#cb84-9" tabindex="-1"></a> <span class="dv">4</span>     <span class="dv">4</span>  <span class="fl">8.90</span>  <span class="fl">26.8</span> Male  A           <span class="dv">3</span>        <span class="fl">8.93</span></span>
<span id="cb84-10"><a href="data-wrangling.html#cb84-10" tabindex="-1"></a> <span class="dv">5</span>     <span class="dv">5</span>  <span class="fl">7.80</span>  <span class="fl">24.2</span> Male  A           <span class="dv">2</span>        <span class="fl">8.07</span></span>
<span id="cb84-11"><a href="data-wrangling.html#cb84-11" tabindex="-1"></a> <span class="dv">6</span>     <span class="dv">6</span> <span class="dv">10</span>     <span class="fl">30.9</span> Male  B           <span class="dv">1</span>       <span class="fl">10.3</span> </span>
<span id="cb84-12"><a href="data-wrangling.html#cb84-12" tabindex="-1"></a> <span class="dv">7</span>     <span class="dv">7</span> <span class="fl">10.4</span>   <span class="fl">33.9</span> Male  B           <span class="dv">0</span>       <span class="fl">11.3</span> </span>
<span id="cb84-13"><a href="data-wrangling.html#cb84-13" tabindex="-1"></a> <span class="dv">8</span>     <span class="dv">8</span> <span class="fl">11.3</span>   <span class="dv">35</span>   Male  O           <span class="dv">1</span>       <span class="fl">11.7</span> </span>
<span id="cb84-14"><a href="data-wrangling.html#cb84-14" tabindex="-1"></a> <span class="dv">9</span>     <span class="dv">9</span> <span class="fl">16.4</span>   <span class="cn">NA</span>   Male  AB          <span class="dv">1</span>       <span class="cn">NA</span>   </span>
<span id="cb84-15"><a href="data-wrangling.html#cb84-15" tabindex="-1"></a><span class="dv">10</span>    <span class="dv">10</span> <span class="fl">14.4</span>   <span class="fl">43.6</span> Male  AB          <span class="dv">1</span>       <span class="fl">14.5</span> </span>
<span id="cb84-16"><a href="data-wrangling.html#cb84-16" tabindex="-1"></a><span class="co"># ℹ 15 more rows</span></span></code></pre></div>
</div>
<div id="aggregating-data" class="section level2" number="7.5">
<h2>
<span class="header-section-number">7.5</span> Aggregating data<a class="anchor" aria-label="anchor" href="#aggregating-data"><i class="fas fa-link"></i></a>
</h2>
<p>Data can be aggregated in R using the <code>summarize</code> function. Below we determine
the mean and standard deviation of the haemoglobin for the patient in the data.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="data-wrangling.html#cb85-1" tabindex="-1"></a>df_blood <span class="sc">%&gt;%</span> </span>
<span id="cb85-2"><a href="data-wrangling.html#cb85-2" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">mean_hb =</span> <span class="fu">mean</span>(hb), <span class="at">sd_hb =</span> <span class="fu">sd</span>(hb))</span>
<span id="cb85-3"><a href="data-wrangling.html#cb85-3" tabindex="-1"></a><span class="co"># A tibble: 1 × 2</span></span>
<span id="cb85-4"><a href="data-wrangling.html#cb85-4" tabindex="-1"></a>  mean_hb sd_hb</span>
<span id="cb85-5"><a href="data-wrangling.html#cb85-5" tabindex="-1"></a>    <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb85-6"><a href="data-wrangling.html#cb85-6" tabindex="-1"></a><span class="dv">1</span>    <span class="fl">11.0</span>  <span class="fl">2.89</span></span></code></pre></div>
<p>Grouping the data by the “bldgrp” before the aggregation yields the aggregated
means and standard deviations for the various blood groups.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="data-wrangling.html#cb86-1" tabindex="-1"></a>df_blood <span class="sc">%&gt;%</span> </span>
<span id="cb86-2"><a href="data-wrangling.html#cb86-2" tabindex="-1"></a>    <span class="fu">group_by</span>(bldgrp) <span class="sc">%&gt;%</span> </span>
<span id="cb86-3"><a href="data-wrangling.html#cb86-3" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">mean_hb =</span> <span class="fu">mean</span>(hb), <span class="at">sd_hb =</span> <span class="fu">sd</span>(hb))</span>
<span id="cb86-4"><a href="data-wrangling.html#cb86-4" tabindex="-1"></a><span class="co"># A tibble: 5 × 3</span></span>
<span id="cb86-5"><a href="data-wrangling.html#cb86-5" tabindex="-1"></a>  bldgrp mean_hb  sd_hb</span>
<span id="cb86-6"><a href="data-wrangling.html#cb86-6" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>    <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb86-7"><a href="data-wrangling.html#cb86-7" tabindex="-1"></a><span class="dv">1</span> A         <span class="fl">7.32</span>  <span class="fl">3.61</span> </span>
<span id="cb86-8"><a href="data-wrangling.html#cb86-8" tabindex="-1"></a><span class="dv">2</span> AB       <span class="fl">13.1</span>   <span class="fl">1.69</span> </span>
<span id="cb86-9"><a href="data-wrangling.html#cb86-9" tabindex="-1"></a><span class="dv">3</span> B        <span class="fl">10.2</span>   <span class="fl">0.283</span></span>
<span id="cb86-10"><a href="data-wrangling.html#cb86-10" tabindex="-1"></a><span class="dv">4</span> O        <span class="fl">11.0</span>   <span class="fl">0.427</span></span>
<span id="cb86-11"><a href="data-wrangling.html#cb86-11" tabindex="-1"></a><span class="dv">5</span> P        <span class="fl">16.4</span>  <span class="cn">NA</span>    </span></code></pre></div>
</div>
<div id="reshaping-data" class="section level2" number="7.6">
<h2>
<span class="header-section-number">7.6</span> Reshaping data<a class="anchor" aria-label="anchor" href="#reshaping-data"><i class="fas fa-link"></i></a>
</h2>
<p>In longitudinal studies, data is captured from the same individual repeatedly.
Such data is recorded either in long or wide formats. A typical example of a
data frame in the long form is bpB below.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="data-wrangling.html#cb87-1" tabindex="-1"></a>bp_long <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(</span>
<span id="cb87-2"><a href="data-wrangling.html#cb87-2" tabindex="-1"></a>    <span class="at">file =</span> <span class="st">"./Data/bp_long.txt"</span>,</span>
<span id="cb87-3"><a href="data-wrangling.html#cb87-3" tabindex="-1"></a>    <span class="at">col_names =</span> <span class="cn">TRUE</span>, </span>
<span id="cb87-4"><a href="data-wrangling.html#cb87-4" tabindex="-1"></a>    <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">"c"</span>, <span class="st">"c"</span>, <span class="st">"i"</span>)</span>
<span id="cb87-5"><a href="data-wrangling.html#cb87-5" tabindex="-1"></a>    )</span>
<span id="cb87-6"><a href="data-wrangling.html#cb87-6" tabindex="-1"></a></span>
<span id="cb87-7"><a href="data-wrangling.html#cb87-7" tabindex="-1"></a>bp_long</span>
<span id="cb87-8"><a href="data-wrangling.html#cb87-8" tabindex="-1"></a><span class="co"># A tibble: 5 × 3</span></span>
<span id="cb87-9"><a href="data-wrangling.html#cb87-9" tabindex="-1"></a>  id    measure   sbp</span>
<span id="cb87-10"><a href="data-wrangling.html#cb87-10" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb87-11"><a href="data-wrangling.html#cb87-11" tabindex="-1"></a><span class="dv">1</span> B01   sbp1      <span class="dv">141</span></span>
<span id="cb87-12"><a href="data-wrangling.html#cb87-12" tabindex="-1"></a><span class="dv">2</span> B01   sbp2      <span class="dv">137</span></span>
<span id="cb87-13"><a href="data-wrangling.html#cb87-13" tabindex="-1"></a><span class="dv">3</span> B02   sbp1      <span class="dv">155</span></span>
<span id="cb87-14"><a href="data-wrangling.html#cb87-14" tabindex="-1"></a><span class="dv">4</span> B02   sbp2      <span class="dv">153</span></span>
<span id="cb87-15"><a href="data-wrangling.html#cb87-15" tabindex="-1"></a><span class="dv">5</span> B03   sbp1      <span class="dv">153</span></span></code></pre></div>
<p>In this format, each visit or round of data taking is captured as a new row, but
with the appropriate study ID and period of record, captured as the variable
measure above. Measurement of systolic blood pressure on day 1 is indicated by
sbp1 in the measure variable. Day 2 measurements are indicated as sbp2.</p>
<p>The wide format of the same data can be obtained as below.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="data-wrangling.html#cb88-1" tabindex="-1"></a>bp_wide <span class="ot">&lt;-</span> </span>
<span id="cb88-2"><a href="data-wrangling.html#cb88-2" tabindex="-1"></a>    bp_long <span class="sc">%&gt;%</span> </span>
<span id="cb88-3"><a href="data-wrangling.html#cb88-3" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb88-4"><a href="data-wrangling.html#cb88-4" tabindex="-1"></a>        <span class="at">id_cols =</span> id, </span>
<span id="cb88-5"><a href="data-wrangling.html#cb88-5" tabindex="-1"></a>        <span class="at">names_from =</span> measure, </span>
<span id="cb88-6"><a href="data-wrangling.html#cb88-6" tabindex="-1"></a>        <span class="at">values_from =</span> sbp</span>
<span id="cb88-7"><a href="data-wrangling.html#cb88-7" tabindex="-1"></a>    )</span>
<span id="cb88-8"><a href="data-wrangling.html#cb88-8" tabindex="-1"></a></span>
<span id="cb88-9"><a href="data-wrangling.html#cb88-9" tabindex="-1"></a>bp_wide</span>
<span id="cb88-10"><a href="data-wrangling.html#cb88-10" tabindex="-1"></a><span class="co"># A tibble: 3 × 3</span></span>
<span id="cb88-11"><a href="data-wrangling.html#cb88-11" tabindex="-1"></a>  id     sbp1  sbp2</span>
<span id="cb88-12"><a href="data-wrangling.html#cb88-12" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb88-13"><a href="data-wrangling.html#cb88-13" tabindex="-1"></a><span class="dv">1</span> B01     <span class="dv">141</span>   <span class="dv">137</span></span>
<span id="cb88-14"><a href="data-wrangling.html#cb88-14" tabindex="-1"></a><span class="dv">2</span> B02     <span class="dv">155</span>   <span class="dv">153</span></span>
<span id="cb88-15"><a href="data-wrangling.html#cb88-15" tabindex="-1"></a><span class="dv">3</span> B03     <span class="dv">153</span>    <span class="cn">NA</span></span></code></pre></div>
<p>Here, each study participant’s record for the whole study is on one row of the data and the different measurements of systolic blood pressure are captured as different variables. Next, we convert the wide back to the long format.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="data-wrangling.html#cb89-1" tabindex="-1"></a>bp_wide <span class="sc">%&gt;%</span> </span>
<span id="cb89-2"><a href="data-wrangling.html#cb89-2" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(</span>
<span id="cb89-3"><a href="data-wrangling.html#cb89-3" tabindex="-1"></a>        <span class="at">cols =</span> <span class="fu">c</span>(sbp1, sbp2),</span>
<span id="cb89-4"><a href="data-wrangling.html#cb89-4" tabindex="-1"></a>        <span class="at">names_to =</span> <span class="st">"time"</span>,</span>
<span id="cb89-5"><a href="data-wrangling.html#cb89-5" tabindex="-1"></a>        <span class="at">values_to =</span> <span class="st">"syst_bp"</span></span>
<span id="cb89-6"><a href="data-wrangling.html#cb89-6" tabindex="-1"></a>    )</span>
<span id="cb89-7"><a href="data-wrangling.html#cb89-7" tabindex="-1"></a><span class="co"># A tibble: 6 × 3</span></span>
<span id="cb89-8"><a href="data-wrangling.html#cb89-8" tabindex="-1"></a>  id    time  syst_bp</span>
<span id="cb89-9"><a href="data-wrangling.html#cb89-9" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb89-10"><a href="data-wrangling.html#cb89-10" tabindex="-1"></a><span class="dv">1</span> B01   sbp1      <span class="dv">141</span></span>
<span id="cb89-11"><a href="data-wrangling.html#cb89-11" tabindex="-1"></a><span class="dv">2</span> B01   sbp2      <span class="dv">137</span></span>
<span id="cb89-12"><a href="data-wrangling.html#cb89-12" tabindex="-1"></a><span class="dv">3</span> B02   sbp1      <span class="dv">155</span></span>
<span id="cb89-13"><a href="data-wrangling.html#cb89-13" tabindex="-1"></a><span class="dv">4</span> B02   sbp2      <span class="dv">153</span></span>
<span id="cb89-14"><a href="data-wrangling.html#cb89-14" tabindex="-1"></a><span class="dv">5</span> B03   sbp1      <span class="dv">153</span></span>
<span id="cb89-15"><a href="data-wrangling.html#cb89-15" tabindex="-1"></a><span class="dv">6</span> B03   sbp2       <span class="cn">NA</span></span></code></pre></div>
</div>
<div id="combining-data" class="section level2" number="7.7">
<h2>
<span class="header-section-number">7.7</span> Combining data<a class="anchor" aria-label="anchor" href="#combining-data"><i class="fas fa-link"></i></a>
</h2>
<p>In a study to determine the change in weight of athletes running a marathon,
data about the athletes were obtained by the investigators. Since the marathon
starts in town A and ends in town B, the investigators decided to weigh the
athletes just before starting the race. Here they took records of the ID of the
athlete’s sid, sex, age and weight at the start (wgtst). The records of five of
these athletes are in the data marathonA. At the end point of the marathon,
another member of the investigation team recorded their IDs (eid), weight upon
completion (wgtend) and the time it took the athletes to complete the marathon
(dura).</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="data-wrangling.html#cb90-1" tabindex="-1"></a>dataA <span class="ot">&lt;-</span> </span>
<span id="cb90-2"><a href="data-wrangling.html#cb90-2" tabindex="-1"></a>    <span class="fu">read_delim</span>(</span>
<span id="cb90-3"><a href="data-wrangling.html#cb90-3" tabindex="-1"></a>        <span class="at">file =</span> <span class="st">"./Data/marathonA.txt"</span>,</span>
<span id="cb90-4"><a href="data-wrangling.html#cb90-4" tabindex="-1"></a>        <span class="at">col_names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb90-5"><a href="data-wrangling.html#cb90-5" tabindex="-1"></a>        <span class="at">delim =</span> <span class="st">"</span><span class="sc">\t</span><span class="st">"</span>,</span>
<span id="cb90-6"><a href="data-wrangling.html#cb90-6" tabindex="-1"></a>        <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"i"</span>,<span class="st">"d"</span>)</span>
<span id="cb90-7"><a href="data-wrangling.html#cb90-7" tabindex="-1"></a>    )</span>
<span id="cb90-8"><a href="data-wrangling.html#cb90-8" tabindex="-1"></a></span>
<span id="cb90-9"><a href="data-wrangling.html#cb90-9" tabindex="-1"></a>dataB <span class="ot">&lt;-</span> </span>
<span id="cb90-10"><a href="data-wrangling.html#cb90-10" tabindex="-1"></a>    <span class="fu">read_delim</span>(</span>
<span id="cb90-11"><a href="data-wrangling.html#cb90-11" tabindex="-1"></a>        <span class="at">file =</span> <span class="st">"./Data/marathonB.txt"</span>,</span>
<span id="cb90-12"><a href="data-wrangling.html#cb90-12" tabindex="-1"></a>        <span class="at">col_names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb90-13"><a href="data-wrangling.html#cb90-13" tabindex="-1"></a>        <span class="at">delim =</span> <span class="st">"</span><span class="sc">\t</span><span class="st">"</span>,</span>
<span id="cb90-14"><a href="data-wrangling.html#cb90-14" tabindex="-1"></a>        <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">"c"</span>,<span class="st">"c"</span>,<span class="st">"i"</span>,<span class="st">"d"</span>)</span>
<span id="cb90-15"><a href="data-wrangling.html#cb90-15" tabindex="-1"></a>    )</span>
<span id="cb90-16"><a href="data-wrangling.html#cb90-16" tabindex="-1"></a></span>
<span id="cb90-17"><a href="data-wrangling.html#cb90-17" tabindex="-1"></a>dataA</span>
<span id="cb90-18"><a href="data-wrangling.html#cb90-18" tabindex="-1"></a><span class="co"># A tibble: 5 × 4</span></span>
<span id="cb90-19"><a href="data-wrangling.html#cb90-19" tabindex="-1"></a>  sid   sex     age wgtst</span>
<span id="cb90-20"><a href="data-wrangling.html#cb90-20" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb90-21"><a href="data-wrangling.html#cb90-21" tabindex="-1"></a><span class="dv">1</span> C001  M        <span class="dv">23</span>  <span class="fl">57.1</span></span>
<span id="cb90-22"><a href="data-wrangling.html#cb90-22" tabindex="-1"></a><span class="dv">2</span> C002  F        <span class="dv">27</span>  <span class="fl">62.3</span></span>
<span id="cb90-23"><a href="data-wrangling.html#cb90-23" tabindex="-1"></a><span class="dv">3</span> C003  M        <span class="dv">19</span>  <span class="fl">54.5</span></span>
<span id="cb90-24"><a href="data-wrangling.html#cb90-24" tabindex="-1"></a><span class="dv">4</span> C004  M        <span class="dv">21</span>  <span class="fl">59.4</span></span>
<span id="cb90-25"><a href="data-wrangling.html#cb90-25" tabindex="-1"></a><span class="dv">5</span> C005  F        <span class="dv">32</span>  <span class="fl">53.4</span></span>
<span id="cb90-26"><a href="data-wrangling.html#cb90-26" tabindex="-1"></a></span>
<span id="cb90-27"><a href="data-wrangling.html#cb90-27" tabindex="-1"></a>dataB</span>
<span id="cb90-28"><a href="data-wrangling.html#cb90-28" tabindex="-1"></a><span class="co"># A tibble: 4 × 3</span></span>
<span id="cb90-29"><a href="data-wrangling.html#cb90-29" tabindex="-1"></a>  eid   wgtend  dura</span>
<span id="cb90-30"><a href="data-wrangling.html#cb90-30" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb90-31"><a href="data-wrangling.html#cb90-31" tabindex="-1"></a><span class="dv">1</span> C003    <span class="fl">53.9</span>   <span class="dv">189</span></span>
<span id="cb90-32"><a href="data-wrangling.html#cb90-32" tabindex="-1"></a><span class="dv">2</span> C005    <span class="dv">53</span>     <span class="dv">197</span></span>
<span id="cb90-33"><a href="data-wrangling.html#cb90-33" tabindex="-1"></a><span class="dv">3</span> C002    <span class="fl">62.2</span>   <span class="dv">201</span></span>
<span id="cb90-34"><a href="data-wrangling.html#cb90-34" tabindex="-1"></a><span class="dv">4</span> C001    <span class="fl">56.8</span>   <span class="dv">209</span></span></code></pre></div>
<p>We can determine the weight change only by matching the before and after
weight of each individual. This is where merging is very useful. Below, we
merge the two data into one. This is done below.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="data-wrangling.html#cb91-1" tabindex="-1"></a>dataA <span class="sc">%&gt;%</span> </span>
<span id="cb91-2"><a href="data-wrangling.html#cb91-2" tabindex="-1"></a>    <span class="fu">full_join</span>(dataB, <span class="at">by =</span> <span class="fu">join_by</span>(sid<span class="sc">==</span>eid))</span>
<span id="cb91-3"><a href="data-wrangling.html#cb91-3" tabindex="-1"></a><span class="co"># A tibble: 5 × 6</span></span>
<span id="cb91-4"><a href="data-wrangling.html#cb91-4" tabindex="-1"></a>  sid   sex     age wgtst wgtend  dura</span>
<span id="cb91-5"><a href="data-wrangling.html#cb91-5" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb91-6"><a href="data-wrangling.html#cb91-6" tabindex="-1"></a><span class="dv">1</span> C001  M        <span class="dv">23</span>  <span class="fl">57.1</span>   <span class="fl">56.8</span>   <span class="dv">209</span></span>
<span id="cb91-7"><a href="data-wrangling.html#cb91-7" tabindex="-1"></a><span class="dv">2</span> C002  F        <span class="dv">27</span>  <span class="fl">62.3</span>   <span class="fl">62.2</span>   <span class="dv">201</span></span>
<span id="cb91-8"><a href="data-wrangling.html#cb91-8" tabindex="-1"></a><span class="dv">3</span> C003  M        <span class="dv">19</span>  <span class="fl">54.5</span>   <span class="fl">53.9</span>   <span class="dv">189</span></span>
<span id="cb91-9"><a href="data-wrangling.html#cb91-9" tabindex="-1"></a><span class="dv">4</span> C004  M        <span class="dv">21</span>  <span class="fl">59.4</span>   <span class="cn">NA</span>      <span class="cn">NA</span></span>
<span id="cb91-10"><a href="data-wrangling.html#cb91-10" tabindex="-1"></a><span class="dv">5</span> C005  F        <span class="dv">32</span>  <span class="fl">53.4</span>   <span class="dv">53</span>     <span class="dv">197</span></span></code></pre></div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="importing-data-into-r.html"><span class="header-section-number">6</span> Importing data into R</a></div>
<div class="next"><a href="data-cleaning.html"><span class="header-section-number">8</span> Data Cleaning</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-wrangling"><span class="header-section-number">7</span> Data wrangling</a></li>
<li><a class="nav-link" href="#renaming-variables"><span class="header-section-number">7.1</span> Renaming variables</a></li>
<li><a class="nav-link" href="#sorting-data"><span class="header-section-number">7.2</span> Sorting data</a></li>
<li><a class="nav-link" href="#subsetting-data"><span class="header-section-number">7.3</span> Subsetting data</a></li>
<li><a class="nav-link" href="#generating-new-variables"><span class="header-section-number">7.4</span> Generating new variables</a></li>
<li><a class="nav-link" href="#aggregating-data"><span class="header-section-number">7.5</span> Aggregating data</a></li>
<li><a class="nav-link" href="#reshaping-data"><span class="header-section-number">7.6</span> Reshaping data</a></li>
<li><a class="nav-link" href="#combining-data"><span class="header-section-number">7.7</span> Combining data</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/sbnguah/MedStatsBook/blob/master/Data_Wrangling.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/sbnguah/MedStatsBook/edit/master/Data_Wrangling.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Medical Statistics using R</strong>" was written by Samuel Blay Nguah. It was last built on 2023-08-25.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
